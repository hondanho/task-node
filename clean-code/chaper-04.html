<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>ChÆ°Æ¡ng 4 - CÆ M-Má»ªN | Iâ€™m here</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="ChÆ°Æ¡ng 4 - CÆ M-Má»ªN" />
<meta name="author" content="hondanho" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="â€œÄá»«ng biáº¿n Ä‘á»‘ng code gá»›m ghiáº¿c cá»§a báº¡n thÃ nh comment - hÃ£y viáº¿t láº¡i nÃ³â€ - Brian W. Kernighan and P. J. Plaugher" />
<meta property="og:description" content="â€œÄá»«ng biáº¿n Ä‘á»‘ng code gá»›m ghiáº¿c cá»§a báº¡n thÃ nh comment - hÃ£y viáº¿t láº¡i nÃ³â€ - Brian W. Kernighan and P. J. Plaugher" />
<link rel="canonical" href="http://localhost:4000/clean-code/chaper-04" />
<meta property="og:url" content="http://localhost:4000/clean-code/chaper-04" />
<meta property="og:site_name" content="Iâ€™m here" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-08-23T00:00:00+07:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="ChÆ°Æ¡ng 4 - CÆ M-Má»ªN" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"hondanho"},"dateModified":"2024-08-23T00:00:00+07:00","datePublished":"2024-08-23T00:00:00+07:00","description":"â€œÄá»«ng biáº¿n Ä‘á»‘ng code gá»›m ghiáº¿c cá»§a báº¡n thÃ nh comment - hÃ£y viáº¿t láº¡i nÃ³â€ - Brian W. Kernighan and P. J. Plaugher","headline":"ChÆ°Æ¡ng 4 - CÆ M-Má»ªN","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/clean-code/chaper-04"},"url":"http://localhost:4000/clean-code/chaper-04"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="I'm here" /></head>
<body><header class="site-header">

  <div class="wrapper"><a href="/" title="">
      Archive
    </a>
    <a href="/category.html">
      Categories
    </a>
    <p>The latest tips and news from the hondanho blog</p></div>
</header>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    var backToTopBtn = document.getElementById("back-to-top");

    window.addEventListener("scroll", function () {
      if (window.pageYOffset > 300) {
        backToTopBtn.style.display = "block";
      } else {
        backToTopBtn.style.display = "none";
      }
    });

    backToTopBtn.addEventListener("click", function (event) {
      event.preventDefault();
      window.scrollTo({
        top: 0,
        behavior: "smooth"
      });
    });
  });
</script><main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">ChÆ°Æ¡ng 4 - CÆ M-Má»ªN</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2024-08-23T00:00:00+07:00" itemprop="datePublished">Aug 23, 2024
      </time>â€¢ posted on  <a class="category-name" href="/category/clean-code">clean-code</a></p>
        
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>â€œ<em>Äá»«ng biáº¿n Ä‘á»‘ng code gá»›m ghiáº¿c cá»§a báº¡n thÃ nh comment - hÃ£y viáº¿t láº¡i nÃ³â€</em><br />
<em>- Brian W. Kernighan and P. J. Plaugher</em></p>

<p>KhÃ´ng gÃ¬ há»¯u Ã­ch báº±ng má»™t comment Ä‘Æ°á»£c Ä‘áº·t Ä‘Ãºng chá»•. KhÃ´ng gÃ¬ cÃ³ thá»ƒ lÃ m lá»™n xá»™n Ä‘á»‘ng code cá»§a báº¡n, ngoáº¡i trá»« nhá»¯ng comment ngu xuáº©n vÃ  dá»‘i trÃ¡. VÃ  khÃ´ng gÃ¬ cÃ³ thá»ƒ gÃ¢y nguy hiá»ƒm báº±ng má»™t comment cá»™c lá»‘c tá»« Ä‘á»i nÃ o vÃ  láº¡i khÃ´ng Ä‘Ãºng sá»± tháº­t.</p>

<p>CÃ¡c comment khÃ´ng pháº£i lÃ  <em>Báº£n danh sÃ¡ch cá»§a Schindler</em> (Schindlerâ€™s List â€“ <a href="https://en.wikipedia.org/wiki/Schindler%27s_List">https://en.wikipedia.org/wiki/Schindlerâ€™s_List</a>. ChÃºng khÃ´ng tá»‘t hoÃ n toÃ n nhÆ° báº¡n nghÄ©. CÃ¡c comment, tá»‘t nháº¥t, nÃªn trá»Ÿ thÃ nh sá»± lá»±a chá»n cuá»‘i cÃ¹ng. Náº¿u ngÃ´n ngá»¯ láº­p trÃ¬nh cá»§a chÃºng ta cÃ³ Ä‘áº§y Ä‘á»§ kháº£ nÄƒng diá»…n Ä‘áº¡t, hoáº·c náº¿u chÃºng ta cÃ³ Ä‘á»§ tÃ i nÄƒng sá»­ dá»¥ng code Ä‘á»ƒ thá»ƒ hiá»‡n háº¿t Ã½ Ä‘á»‹nh cá»§a mÃ¬nh thÃ¬ chÃºng ta Ä‘Ã£ khÃ´ng cáº§n Ä‘áº¿n nhá»¯ng dÃ²ng comment.</p>

<p>Viá»‡c dÃ¹ng Ä‘Ãºng cÃ¡c comment lÃ  má»™t cÃ¡ch Ä‘á»ƒ bÃ¹ Ä‘áº¯p cho sá»± tháº¥t báº¡i cá»§a chÃºng ta trong viá»‡c thá»ƒ hiá»‡n Ã½ nghÄ©a cá»§a nhá»¯ng dÃ²ng code. HÃ£y lÆ°u Ã½ ráº±ng tÃ´i Ä‘Ã£ dÃ¹ng tá»« tháº¥t báº¡i. ChÃ­nh xÃ¡c lÃ  váº­y â€“ comment luÃ´n luÃ´n lÃ  sá»± tháº¥t báº¡i. ChÃºng ta pháº£i cÃ³ chÃºng vÃ¬ chÃºng ta khÃ´ng thá»ƒ thá»ƒ hiá»‡n háº¿t Ã½ nghÄ©a cá»§a code, vÃ  viá»‡c sá»­ dá»¥ng chÃºng khÃ´ng pháº£i lÃ  nguyÃªn nhÃ¢n Ä‘Æ°á»£c tÃ¡n dÆ°Æ¡ng.</p>

<p>Váº­y nÃªn, khi báº¡n tháº¥y mÃ¬nh cáº§n viáº¿t comment, hÃ£y suy nghÄ© ká»¹ xem liá»‡u cÃ³ cÃ¡ch nÃ o Ä‘Ã³ Ä‘á»ƒ biáº¿n cÃ¡c dÃ²ng code thÃ nh chÃ­nh xÃ¡c nhá»¯ng gÃ¬ báº¡n muá»‘n thá»ƒ hiá»‡n hay khÃ´ng. Má»—i khi báº¡n thá»ƒ hiá»‡n chÃ­nh xÃ¡c Ã½ nghÄ©a cá»§a code, hÃ£y tá»± khÃ­ch lá»‡ mÃ¬nh. Má»—i khi báº¡n viáº¿t comment, báº¡n nÃªn tá»± váº£ vÃ o máº·t cho sá»± tháº¥t báº¡i Ä‘Ã³ .</p>

<p>Táº¡i sao tÃ´i láº¡i tháº¥t vá»ng vá» cÃ¡c comment? VÃ¬ chÃºng Ä‘áº§y dá»‘i trÃ¡. KhÃ´ng pháº£i lÃºc nÃ o cÅ©ng váº­y, nhÆ°ng váº¥n Ä‘á» nÃ y láº¡i ráº¥t thÆ°á»ng xuyÃªn xÃ£y ra: Comment cÃ ng cÅ© vÃ  cÃ ng khÃ´ng liÃªn quan tá»›i code mÃ  nÃ³ mÃ´ táº£, cÃ ng cÃ³ nhiá»u kháº£ nÄƒng nÃ³ sai. LÃ½ do ráº¥t Ä‘Æ¡n giáº£n, cÃ¡c láº­p trÃ¬nh viÃªn khÃ´ng thá»ƒ báº£o trÃ¬ chÃºng.</p>

<p>Code cá»§a dá»± Ã¡n thÃ¬ thay Ä‘á»•i vÃ  phÃ¡t triá»ƒn liÃªn tá»¥c. CÃ¡c khá»‘i dá»¯ liá»‡u di chuyá»ƒn tá»« nÆ¡i nÃ y Ä‘áº¿n nÆ¡i kia. Nhá»¯ng khá»‘i Ä‘Ã³ tÃ¡ch ra vÃ  tÃ¡i láº­p Ä‘á»ƒ táº¡o nÃªn chÆ°Æ¡ng trÃ¬nh. Tháº­t khÃ´ng may, nhá»¯ng comment khÃ´ng pháº£i lÃºc nÃ o cÅ©ng theo ká»‹p chÃºng. Comment thÃ¬ thÆ°á»ng xuyÃªn bá»‹ tÃ¡ch ra khá»i code mÃ  nÃ³ mÃ´ táº£ vÃ  trá»Ÿ nÃªn Ä‘á»©t Ä‘oáº¡n vá»›i Ä‘á»™ chÃ­nh xÃ¡c giáº£m dáº§n. VÃ­ dá»¥, hÃ£y xem nhá»¯ng gÃ¬ xÃ£y ra vá»›i comment nÃ y vÃ  dÃ²ng code mÃ  nÃ³ dá»± Ä‘á»‹nh mÃ´ táº£:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">MockRequest</span> <span class="n">request</span><span class="o">;</span>
<span class="kd">private</span> <span class="kd">final</span> <span class="nc">String</span> <span class="no">HTTP_DATE_REGEXP</span> <span class="o">=</span>
 <span class="s">"[SMTWF][a-z]{2}\\,\\s[0-9]{2}\\s[JFMASOND][a-z]{2}\\s"</span><span class="o">+</span>
 <span class="s">"[0-9]{4}\\s[0-9]{2}\\:[0-9]{2}\\:[0-9]{2}\\sGMT"</span><span class="o">;</span>
<span class="kd">private</span> <span class="nc">Response</span> <span class="n">response</span><span class="o">;</span>
<span class="kd">private</span> <span class="nc">FitNesseContext</span> <span class="n">context</span><span class="o">;</span>
<span class="kd">private</span> <span class="nc">FileResponder</span> <span class="n">responder</span><span class="o">;</span>
<span class="kd">private</span> <span class="nc">Locale</span> <span class="n">saveLocale</span><span class="o">;</span>
<span class="c1">// Example: "Tue, 02 Apr 2003 22:18:49 GMT"</span>
</code></pre></div></div>

<p>CÃ¡c biáº¿n khÃ¡c cÃ³ thá»ƒ Ä‘Æ°á»£c thÃªm vÃ o sau Ä‘Ã³ Ä‘áº·t xen káº½ vÃ o giá»¯a giÃ¡ trá»‹ HTTP_DATE_REGEXP. GiÃ¡ trá»‹ HTTP_DATE_REGEXP Ä‘Æ°á»£c viáº¿t láº¡i vÃ  comment cá»§a báº¡n thÃ¬ tan nÃ¡t. ğŸ™‚</p>

<p>CÃ³ quan Ä‘iá»ƒm cho ráº±ng cÃ¡c láº­p trÃ¬nh viÃªn nÃªn cÃ³ Ä‘á»§ ká»· luáº­t Ä‘á»ƒ sá»­a cáº£ nhá»¯ng dÃ²ng comment khi há» Ä‘Ã£ thay Ä‘á»•i code. TÃ´i Ä‘á»“ng Ã½, há» nÃªn nhÆ° tháº¿. NhÆ°ng tÃ´i sáº½ chá»n cÃ¡ch lÃ m cho code rÃµ rÃ ng dá»… hiá»ƒu, Ä‘áº¿n má»©c nÃ³ khÃ´ng cáº§n cÃ¡c comment ngay tá»« Ä‘áº§u.</p>

<p>Nhá»¯ng dÃ²ng comment báº­y cÃ²n tá»“i tá»‡ hÆ¡n lÃ  khÃ´ng comment. ChÃºng lá»«a gáº¡t vÃ  Ä‘Ã¡nh láº¡c hÆ°á»›ng ngÆ°á»i Ä‘á»c. ChÃºng Ä‘Æ°a ra nhá»¯ng dá»± tÃ­nh khÃ´ng bao giá» Ä‘Æ°á»£c thá»±c hiá»‡n. ChÃºng Ä‘áº·t ra nhá»¯ng quy táº¯c cÅ©, khÃ´ng cáº§n, hoáº·c khÃ´ng nÃªn Ä‘Æ°á»£c tuÃ¢n theo ná»¯a.</p>

<p>ChÃ¢n lÃ½ chá»‰ cÃ³ thá»ƒ tÃ¬m tháº¥y táº¡i má»™t nÆ¡i duy nháº¥t: Code. Chá»‰ cÃ³ code má»›i nÃ³i cho báº¡n biáº¿t tháº­t sá»± nhá»¯ng gÃ¬ nÃ³ lÃ m. NÃ³ lÃ  nguá»“n thÃ´ng tin chÃ­nh xÃ¡c duy nháº¥t. Do Ä‘Ã³, máº·c dÃ¹ comment Ä‘Ã´i khi lÃ  cáº§n thiáº¿t, nhÆ°ng chÃºng tÃ´i sáº½ cá»‘ gáº¯ng Ä‘á»ƒ giáº£m thiá»ƒu nÃ³.</p>

<h2 id="Ä‘á»«ng-dÃ¹ng-comment-Ä‘á»ƒ-lÃ m-mÃ u-cho-code">Äá»«ng dÃ¹ng comment Ä‘á»ƒ lÃ m mÃ u cho code</h2>

<p>Má»™t trong nhá»¯ng Ä‘á»™ng lá»±c to lá»›n Ä‘á»ƒ viáº¿t comment lÃ  do code tá»“i, code tá»‘i nghÄ©a. ChÃºng ta viáº¿t má»™t hÃ m vÃ  chÃºng ta biáº¿t nÃ³ khÃ³ hiá»ƒu, nÃ³ vÃ´ tá»• chá»©c, chÃºng ta biáº¿t nÃ³ lÃ  má»™t Ä‘á»‘ng há»— lá»‘n. Váº­y nÃªn chÃºng ta tá»± nhá»§ ráº±ng: â€œá»’, tá»‘t hÆ¡n nÃªn viáº¿t comment á»Ÿ Ä‘Ã¢y!â€. KhÃ´ng! Tá»‘t hÆ¡n báº¡n nÃªn viáº¿t láº¡i code!</p>

<p>Code sÃ¡ng nghÄ©a vÃ  rÃµ rÃ ng vá»›i Ã­t comment sáº½ tuyá»‡t vá»i hÆ¡n so vá»›i code tá»‘i nghÄ©a, phá»©c táº¡p vá»›i nhiá»u comment. Thay vÃ¬ dÃ nh thá»i gian Ä‘á»ƒ viáº¿t comment giáº£i thÃ­ch má»› code há»— lá»‘n Ä‘Ã³, hÃ£y dÃ nh thá»i gian Ä‘á»ƒ dá»n dáº¹p nÃ³.</p>

<h2 id="giáº£i-thÃ­ch-Ã½-nghÄ©a-ngay-trong-code">Giáº£i thÃ­ch Ã½ nghÄ©a ngay trong code</h2>

<p>Cháº¯c cháº¯n cÃ³ nhá»¯ng lÃºc code cá»§a báº¡n ráº¥t khÃ³ Ä‘á»ƒ giáº£i thÃ­ch nÃ³ Ä‘ang lÃ m gÃ¬. Tháº­t khÃ´ng may, Ä‘iá»u nÃ y lÃ m cho nhiá»u láº­p trÃ¬nh viÃªn cho ráº±ng code hiáº¿m khi lÃ  má»™t cÃ¡ch tá»‘t Ä‘á»ƒ giáº£i thÃ­ch. Äiá»u Ä‘Ã³ hoÃ n toÃ n sai. Báº¡n muá»‘n nhÃ¬n tháº¥y Ä‘iá»u gÃ¬? CÃ¡i nÃ y:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Check to see if the employee is eligible for full benefits</span>
<span class="k">if</span> <span class="o">((</span><span class="n">employee</span><span class="o">.</span><span class="na">flags</span> <span class="o">&amp;</span> <span class="no">HOURLY_FLAG</span><span class="o">)</span> <span class="o">&amp;&amp;</span> 
<span class="o">(</span><span class="n">employee</span><span class="o">.</span><span class="na">age</span> <span class="o">&gt;</span> <span class="mi">65</span><span class="o">))</span>
</code></pre></div></div>

<p>Hay cÃ¡i nÃ y?</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="o">(</span><span class="n">employee</span><span class="o">.</span><span class="na">isEligibleForFullBenefits</span><span class="o">())</span>
</code></pre></div></div>

<p>Chá»‰ máº¥t vÃ i giÃ¢y suy nghÄ© Ä‘á»ƒ truyá»n háº¿t thÃ´ng Ä‘iá»‡p cá»§a báº¡n vÃ o code. Trong nhiá»u trÆ°á»ng há»£p, nÃ³ chá»‰ Ä‘Æ¡n giáº£n lÃ  táº¡o ra má»™t hÃ m cÃ³ tÃªn giá»‘ng vá»›i comment mÃ  báº¡n muá»‘n viáº¿t</p>

<h2 id="good-comments">Good Comments</h2>

<p>Má»™t sá»‘ comment lÃ  cáº§n thiáº¿t hoáº·c cÃ³ Ã­ch. ChÃºng ta sáº½ xem xet má»™t vÃ i trÆ°á»ng há»£p mÃ  tÃ´i cho lÃ  xá»©ng Ä‘Ã¡ng Ä‘á»ƒ báº¡n bá» cÃ´ng ra viáº¿t. Tuy nhiÃªn, hÃ£y nhá»› ráº±ng comment tháº­t sá»± tá»‘t lÃ  comment khÃ´ng cáº§n pháº£i viáº¿t ra.</p>

<h3 id="comment-phÃ¡p-lÃ½">Comment phÃ¡p lÃ½</h3>

<p>ÄÃ´i khi cÃ¡c tiÃªu chuáº©n mÃ£ hÃ³a doanh nghiá»‡p buá»™c chÃºng ta pháº£i viáº¿t má»™t sá»‘ comment nháº¥t Ä‘á»‹nh vÃ¬ lÃ½ do phÃ¡p lÃ½. VÃ­ dá»¥, tuyÃªn bá»‘ báº£n quyá»n vÃ  quyá»n tÃ¡c giáº£ lÃ  nhá»¯ng Ä‘iá»u cáº§n thiáº¿t vÃ  há»£p lÃ½ Ä‘á»ƒ Ä‘Æ°a vÃ o comment khi báº¯t Ä‘áº§u má»—i source code file.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Copyright (C) 2003,2004,2005 by Object Mentor, Inc.
 * All rights reserved. 
 * Released under the terms of the GNU General Public License version
 * 2 or later.
 */</span>
</code></pre></div></div>

<p>Äá»«ng Ä‘Æ°a cáº£ há»£p Ä‘á»“ng hay nhá»¯ng Ä‘iá»u luáº­t vÃ o comment. Náº¿u cÃ³ thá»ƒ, hÃ£y tham kháº£o má»™t vÃ i giáº¥y phÃ©p tiÃªu chuáº©n hay tÃ i liá»‡u bÃªn ngoÃ i khÃ¡c thay vÃ¬ Ä‘Æ°a táº¥t cáº£ nhá»¯ng Ä‘iá»u khoáº£n vÃ  Ä‘iá»u kiá»‡n vÃ o.</p>

<h3 id="comment-cung-cáº¥p-thÃ´ng-tin">Comment cung cáº¥p thÃ´ng tin</h3>

<p>Cung cáº¥p thÃ´ng tin cÆ¡ báº£n vá»›i má»™t vÃ i dÃ²ng comment Ä‘Ã´i khi ráº¥t há»¯u Ã­ch. VÃ­ dá»¥, hÃ£y xem cÃ¡ch mÃ  comment nÃ y giáº£i thÃ­ch vá» giÃ¡ trá»‹ tráº£ vá» cá»§a má»™t phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Returns an instance of the Responder being tested.</span>
<span class="n">protectedabstractResponder</span> <span class="nf">responderInstance</span><span class="o">();</span>
</code></pre></div></div>

<p>Má»™t comment nhÆ° tháº¿ nÃ y, Ä‘Ã´i khi, cÃ³ thá»ƒ lÃ  há»¯u Ã­ch. NhÆ°ng tá»‘t hÆ¡n lÃ  sá»­ dá»¥ng tÃªn cá»§a hÃ m Ä‘á»ƒ truyá»n Ä‘áº¡t thÃ´ng tin náº¿u cÃ³ thá»ƒ. VÃ­ dá»¥, trong trÆ°á»ng há»£p nÃ y, chÃºng ta cÃ³ thá»ƒ dá»n dáº¹p comment trÃªn báº±ng cÃ¡ch Ä‘áº·t láº¡i tÃªn hÃ m thÃ nh responderBeingTested.</p>

<p>TrÆ°á»ng há»£p dÆ°á»›i Ä‘Ã¢y cÃ³ váº» tá»‘t hÆ¡n má»™t chÃºt:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// format matched kk:mm:ss EEE, MMM dd, yyyy </span>
<span class="nc">Pattern</span> <span class="n">timeMatcher</span> <span class="o">=</span> <span class="nc">Pattern</span><span class="o">.</span><span class="na">compile</span><span class="o">(</span>
  <span class="s">"\\d*:\\d*:\\d* \\w*, \\w* \\d*, \\d*"</span><span class="o">);</span>
</code></pre></div></div>

<p>Trong trÆ°á»ng há»£p nÃ y, comment cho chÃºng ta biáº¿t ráº±ng biá»ƒu thá»©c Ä‘Æ°á»£c táº¡o ra khá»›p vá»›i thá»i gian vÃ  ngÃ y thÃ¡ng, vÃ  Ä‘Æ°á»£c Ä‘á»‹nh dáº¡ng báº±ng hÃ m SimpleDateFormat.format. Tuy nhiÃªn, nÃ³ cÃ³ thá»ƒ rÃµ rÃ ng hÆ¡n náº¿u code nÃ y Ä‘Æ°á»£c chuyá»ƒn sang má»™t lá»›p Ä‘áº·c biá»‡t chuyá»ƒn Ä‘á»•i Ä‘á»‹nh dáº¡ng cá»§a ngÃ y vÃ  thá»i gian. VÃ  sau Ä‘Ã³, báº¡n cÃ³ thá»ƒ Ä‘Æ°a comment trÃªn vÃ o sá»t rÃ¡c.</p>

<h3 id="giáº£i-thÃ­ch-má»¥c-Ä‘Ã­ch">Giáº£i thÃ­ch má»¥c Ä‘Ã­ch</h3>

<p>ÄÃ´i khi comment khÃ´ng chá»‰ cung cáº¥p thÃ´ng tin vá» nhá»¯ng dÃ²ng code mÃ  cÃ²n cung cáº¥p Ã½ Ä‘á»‹nh Ä‘áº±ng sau nÃ³. Trong trÆ°á»ng há»£p sau Ä‘Ã¢y, chÃºng tÃ´i tháº¥y má»™t comment ghi láº¡i má»™t quyáº¿t Ä‘á»‹nh thÃº vá»‹: khi so sÃ¡nh hai Ä‘á»‘i tÆ°á»£ng, tÃ¡c giáº£ quyáº¿t Ä‘á»‹nh ráº±ng anh ta muá»‘n sáº¯p xáº¿p cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p mÃ¬nh <em>luÃ´n</em> cao hÆ¡n cÃ¡c Ä‘á»‘i tÆ°á»£ng khÃ¡c.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">int</span> <span class="nf">compareTo</span><span class="o">(</span><span class="nc">Object</span> <span class="n">o</span><span class="o">)</span>
<span class="o">{</span>
    <span class="k">if</span><span class="o">(</span><span class="n">o</span> <span class="k">instanceof</span> <span class="nc">WikiPagePath</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="nc">WikiPagePath</span> <span class="n">p</span> <span class="o">=</span> <span class="o">(</span><span class="nc">WikiPagePath</span><span class="o">)</span> <span class="n">o</span><span class="o">;</span>
        <span class="nc">String</span> <span class="n">compressedName</span> <span class="o">=</span> <span class="nc">StringUtil</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">names</span><span class="o">,</span> <span class="s">""</span><span class="o">);</span>
        <span class="nc">String</span> <span class="n">compressedArgumentName</span> <span class="o">=</span> <span class="nc">StringUtil</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">names</span><span class="o">,</span> <span class="s">""</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">compressedName</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">compressedArgumentName</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="mi">1</span><span class="o">;</span> <span class="c1">// we are greater because we are the right type.</span>
<span class="o">}</span>
</code></pre></div></div>

<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ tá»‘t hÆ¡n. CÃ³ thá»ƒ báº¡n khÃ´ng Ä‘á»“ng tÃ¬nh vá»›i cÃ¡ch giáº£i quyáº¿t váº¥n Ä‘á» cá»§a tÃ¡c giáº£, nhÆ°ng Ã­t ra báº¡n biáº¿t Ä‘Æ°á»£c anh áº¥y Ä‘ang cá»‘ gáº¯ng lÃ m gÃ¬</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testConcurrentAddWidgets</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="nc">WidgetBuilder</span> <span class="n">widgetBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WidgetBuilder</span><span class="o">(</span><span class="k">new</span> <span class="nc">Class</span><span class="o">[]{</span><span class="nc">BoldWidget</span><span class="o">.</span><span class="na">class</span><span class="o">});</span>
    <span class="nc">String</span> <span class="n">text</span> <span class="o">=</span> <span class="s">"'''bold text'''"</span><span class="o">;</span>
    <span class="nc">ParentWidget</span> <span class="n">parent</span> <span class="o">=</span>
    <span class="k">new</span> <span class="nf">BoldWidget</span><span class="o">(</span><span class="k">new</span> <span class="nc">MockWidgetRoot</span><span class="o">(),</span> <span class="s">"'''bold text'''"</span><span class="o">);</span>
    <span class="nc">AtomicBoolean</span> <span class="n">failFlag</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">AtomicBoolean</span><span class="o">();</span>
    <span class="n">failFlag</span><span class="o">.</span><span class="na">set</span><span class="o">(</span><span class="kc">false</span><span class="o">);</span>
    <span class="c1">//This is our best attempt to get a race condition</span>
    <span class="c1">//by creating large number of threads.</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">25000</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
        <span class="nc">WidgetBuilderThread</span> <span class="n">widgetBuilderThread</span> <span class="o">=</span>
        <span class="k">new</span> <span class="nf">WidgetBuilderThread</span><span class="o">(</span><span class="n">widgetBuilder</span><span class="o">,</span> <span class="n">text</span><span class="o">,</span> <span class="n">parent</span><span class="o">,</span>
								<span class="n">failFlag</span><span class="o">);</span>
        <span class="nc">Thread</span> <span class="n">thread</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Thread</span><span class="o">(</span><span class="n">widgetBuilderThread</span><span class="o">);</span>
        <span class="n">thread</span><span class="o">.</span><span class="na">start</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="n">assertEquals</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="n">failFlag</span><span class="o">.</span><span class="na">get</span><span class="o">());</span>
<span class="o">}</span>
</code></pre></div></div>

<p><em>Race condition</em> lÃ  gÃ¬: <a href="https://en.wikipedia.org/wiki/Race_condition">https://en.wikipedia.org/</a></p>

<p>Hoáº·c link Tiáº¿ng Viá»‡t: <a href="https://vi.wikipedia.org/wiki/TÆ°Æ¡ng_tranh_%28khoa_há»c_mÃ¡y_tÃ­nh%29">https://vi.wikipedia.org</a></p>

<h3 id="lÃ m-dá»…-hiá»ƒu">LÃ m dá»… hiá»ƒu</h3>

<p>ÄÃ´i khi báº¡n cáº§n dÃ¹ng comment Ä‘á»ƒ diá»…n giáº£i Ã½ nghÄ©a cá»§a cÃ¡c Ä‘á»‘i sá»‘ khÃ³ hiá»ƒu hoáº·c giÃ¡ trá»‹ tráº£ vá», Ä‘á»ƒ biáº¿n chÃºng thÃ nh thá»© gÃ¬ Ä‘Ã³ cÃ³ thá»ƒ hiá»ƒu Ä‘Æ°á»£c. NhÆ°ng tá»‘t nháº¥t váº«n lÃ  tÃ¬m cÃ¡ch lÃ m cho cÃ¡c Ä‘á»‘i sá»‘ hoáº·c giÃ¡ trá»‹ tráº£ vá» Ä‘Ã³ trá»Ÿ nÃªn rÃµ rÃ ng theo cÃ¡ch cá»§a báº¡n. NhÆ°ng khi nÃ³ lÃ  má»™t pháº§n cá»§a thÆ° viá»‡n, hoáº·c thuá»™c vá» má»™t pháº§n code mÃ  báº¡n khÃ´ng cÃ³ quyá»n tÃ¹y chá»‰nh, thÃ¬ má»™t comment giáº£i thÃ­ch dá»… hiá»ƒu cÃ³ thá»ƒ cÃ³ Ã­ch trong trÆ°á»ng há»£p nÃ y.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCompareTo</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span>
<span class="o">{</span>
    <span class="nc">WikiPagePath</span> <span class="n">a</span> <span class="o">=</span> <span class="nc">PathParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"PageA"</span><span class="o">);</span>
    <span class="nc">WikiPagePath</span> <span class="n">ab</span> <span class="o">=</span> <span class="nc">PathParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"PageA.PageB"</span><span class="o">);</span>
    <span class="nc">WikiPagePath</span> <span class="n">b</span> <span class="o">=</span> <span class="nc">PathParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"PageB"</span><span class="o">);</span>
    <span class="nc">WikiPagePath</span> <span class="n">aa</span> <span class="o">=</span> <span class="nc">PathParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"PageA.PageA"</span><span class="o">);</span>
    <span class="nc">WikiPagePath</span> <span class="n">bb</span> <span class="o">=</span> <span class="nc">PathParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"PageB.PageB"</span><span class="o">);</span>
    <span class="nc">WikiPagePath</span> <span class="n">ba</span> <span class="o">=</span> <span class="nc">PathParser</span><span class="o">.</span><span class="na">parse</span><span class="o">(</span><span class="s">"PageB.PageA"</span><span class="o">);</span>

    <span class="n">assertTrue</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">// a == a</span>
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">// a != b</span>
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">ab</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">ab</span><span class="o">)</span> <span class="o">==</span> <span class="mi">0</span><span class="o">);</span> <span class="c1">// ab == ab</span>
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">a</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">b</span><span class="o">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span> <span class="c1">// a &lt; b</span>
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">aa</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">ab</span><span class="o">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span> <span class="c1">// aa &lt; ab</span>
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">ba</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">bb</span><span class="o">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">);</span> <span class="c1">// ba &lt; bb</span>
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">b</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">a</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span><span class="o">);</span> <span class="c1">// b &gt; a</span>
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">ab</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">aa</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span><span class="o">);</span> <span class="c1">// ab &gt; aa</span>
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">bb</span><span class="o">.</span><span class="na">compareTo</span><span class="o">(</span><span class="n">ba</span><span class="o">)</span> <span class="o">==</span> <span class="mi">1</span><span class="o">);</span> <span class="c1">// bb &gt; ba</span>
<span class="o">}</span>
</code></pre></div></div>

<p>DÄ© nhiÃªn, kháº£ nÄƒng cÃ¡c comment dáº¡ng nÃ y cung cáº¥p thÃ´ng tin khÃ´ng chÃ­nh xÃ¡c lÃ  khÃ¡ cao. Xem láº¡i cÃ¡c vÃ­ dá»¥ trÆ°á»›c Ä‘á»ƒ tháº¥y ráº±ng viá»‡c xÃ¡c nháº­n thÃ´ng tin tá»« comment khÃ³ tháº¿ nÃ o. Äiá»u nÃ y giáº£i thÃ­ch lÃ½ do táº¡i sao lÃ m cho comment dá»… hiá»ƒu lÃ  cáº§n thiáº¿t, máº·c dÃ¹ Ä‘iá»u Ä‘Ã³ Ä‘á»“ng nghÄ©a vá»›i sá»± máº¡o hiá»ƒm. Váº­y nÃªn trÆ°á»›c khi báº¡n viáº¿t nhá»¯ng comment nhÆ° tháº¿ nÃ y, hÃ£y cháº¯c cháº¯n ráº±ng khÃ´ng cÃ²n cÃ¡ch nÃ o tá»‘i Æ°u hÆ¡n, vÃ¬ sau Ä‘Ã³ báº¡n cáº§n quan tÃ¢m Ä‘áº¿n Ä‘á»™ chÃ­nh xÃ¡c cá»§a chÃºng má»—i khi báº¡n chá»‰nh sá»­a láº¡i code.</p>

<h3 id="cÃ¡c-cáº£nh-bÃ¡o-vá»-háº­u-quáº£">CÃ¡c cáº£nh bÃ¡o vá» háº­u quáº£</h3>

<p>ÄÃ´i khi nÃ³ ráº¥t há»¯u Ã­ch Ä‘á»ƒ cáº£nh bÃ¡o cÃ¡c láº­p trÃ¬nh viÃªn khÃ¡c vá» háº­u quáº£ xáº£y ra. VÃ­ dá»¥, Ä‘Ã¢y lÃ  má»™t comment giáº£i thÃ­ch táº¡i sao test case nÃ y láº¡i bá»‹ táº¯t:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Don't run unless you </span>
<span class="c1">// have some time to kill â€“ Äá»«ng cháº¡y hÃ m nÃ y, trá»« khi mÃ y quÃ¡ ráº£nh </span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">_testWithReallyBigFile</span><span class="o">()</span> <span class="o">{</span>
    <span class="n">writeLinesToFile</span><span class="o">(</span><span class="mi">10000000</span><span class="o">);</span>
    <span class="n">response</span><span class="o">.</span><span class="na">setBody</span><span class="o">(</span><span class="n">testFile</span><span class="o">);</span> 
    <span class="n">response</span><span class="o">.</span><span class="na">readyToSend</span><span class="o">(</span><span class="k">this</span><span class="o">);</span> 
    <span class="nc">String</span> <span class="n">responseString</span> <span class="o">=</span> <span class="n">output</span><span class="o">.</span><span class="na">toString</span><span class="o">();</span>
    <span class="n">assertSubString</span><span class="o">(</span><span class="s">"Content-Length: 1000000000"</span><span class="o">,</span> <span class="n">responseString</span><span class="o">);</span> 
    <span class="n">assertTrue</span><span class="o">(</span><span class="n">bytesSent</span> <span class="o">&gt;</span> <span class="mi">1000000000</span><span class="o">);</span> 
<span class="o">}</span>
</code></pre></div></div>

<p>Táº¥t nhiÃªn lÃ  ngÃ y nay, chÃºng tÃ´i táº¯t cÃ¡c test case báº±ng cÃ¡ch sá»­ dá»¥ng thuá»™c tÃ­nh <code class="language-plaintext highlighter-rouge">@Ignore</code> vá»›i má»™t chuá»—i giáº£i thÃ­ch thÃ­ch há»£p: <code class="language-plaintext highlighter-rouge">@Ignore ("It takes too long to run")</code>. NhÆ°ng trÆ°á»›c khi JUnit 4 xuáº¥t hiá»‡n, viá»‡c Ä‘áº·t má»™t dáº¥u gáº¡ch dÆ°á»›i vÃ o trÆ°á»›c tÃªn hÃ m lÃ  má»™t quy táº¯c ráº¥t phá»• biáº¿n. CÃ¡c comment Ä‘á»“ng thá»i Ä‘Æ°á»£c xem nhÆ° lÃ  cÃ¡ch Ä‘Ã¡nh dáº¥u Ä‘á»ƒ láº­p trÃ¬nh viÃªn chÃº Ã½ Ä‘áº¿n cáº£nh bÃ¡o cá»§a hÃ m hÆ¡n.</p>

<p>ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ Ä‘au khá»• khÃ¡c:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">SimpleDateFormat</span> <span class="nf">makeStandardHttpDateFormat</span><span class="o">()</span>
<span class="o">{</span>
    <span class="c1">//SimpleDateFormat is not thread safe,</span>
    <span class="c1">//so we need to create each instance independently.</span>
    <span class="nc">SimpleDateFormat</span> <span class="n">df</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleDateFormat</span><span class="o">(</span><span class="s">"EEE, dd MMM yyyy HH:mm:ss z"</span><span class="o">);</span>
    <span class="n">df</span><span class="o">.</span><span class="na">setTimeZone</span><span class="o">(</span><span class="nc">TimeZone</span><span class="o">.</span><span class="na">getTimeZone</span><span class="o">(</span><span class="s">"GMT"</span><span class="o">));</span>
    <span class="k">return</span> <span class="n">df</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>CÃ³ thá»ƒ cÃ²n nhiá»u cÃ¡ch tá»‘t hÆ¡n. TÃ´i Ä‘á»“ng Ã½. NhÆ°ng comment trong trÆ°á»ng há»£p nÃ y lÃ  hoÃ n toÃ n há»£p lÃ½, nÃ³ sáº½ ngÄƒn Ä‘Æ°á»£c má»™t sá»‘ láº­p trÃ¬nh viÃªn ham há»‘ sá»­ dá»¥ng má»™t phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o tÄ©nh.</p>

<h3 id="todo-comments">TODO comments</h3>

<p>ÄÃ´i khi viá»‡c Ä‘á»ƒ láº¡i cÃ¡c dÃ²ng comment dáº¡ng //TODO lÃ  Ä‘iá»u cáº§n thiáº¿t. Trong trÆ°á»ng há»£p dÆ°á»›i Ä‘Ã¢y, comment dáº¡ng TODO giáº£i thÃ­ch táº¡i sao hÃ m nÃ y láº¡i lÃ  hÃ m suy biáº¿n, vÃ  tÆ°Æ¡ng lai cá»§a hÃ m sáº½ nhÆ° tháº¿ nÃ o:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// TODO-MdM these are not needed â€“ HÃ m nÃ y khÃ´ng cáº§n thiáº¿t</span>
<span class="c1">// We expect this to go away when we do the checkout model</span>
<span class="c1">// NÃ³ sáº½ bá»‹ xÃ³a khi chÃºng tÃ´i thá»±c hiá»‡n mÃ´ hÃ¬nh thanh toÃ¡n</span>
<span class="kd">protected</span> <span class="nc">VersionInfo</span> <span class="nf">makeVersion</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span>
<span class="o">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Nhá»¯ng comment dáº¡ng TODO lÃ  nhá»¯ng cÃ´ng viá»‡c mÃ  láº­p trÃ¬nh viÃªn cho ráº±ng nÃªn Ä‘Æ°á»£c thá»±c hiá»‡n, nhÆ°ng vÃ¬ lÃ½ do nÃ o Ä‘Ã³ mÃ  há» khÃ´ng thá»ƒ thá»±c hiá»‡n nÃ³ ngay lÃºc nÃ y. NÃ³ cÃ³ thá»ƒ lÃ  má»™t lá»i nháº¯c Ä‘á»ƒ xÃ³a má»™t hÃ m khÃ´ng dÃ¹ng ná»¯a, hoáº·c yÃªu cáº§u ngÆ°á»i khÃ¡c xem xÃ©t má»™t sá»‘ váº¥n Ä‘á»: Ä‘áº·t láº¡i má»™t cÃ¡i tÃªn khÃ¡c tá»‘t hÆ¡n, lá»i nháº¯c thay Ä‘á»•i code cá»§a hÃ m khi káº¿ hoáº¡ch cá»§a dá»± Ã¡n thay Ä‘á»•i,.. NhÆ°ng dÃ¹ TODO cÃ³ lÃ  gÃ¬ Ä‘i ná»¯a, nÃ³ cháº¯c cháº¯n khÃ´ng pháº£i lÃ  lÃ½ do Ä‘á»ƒ báº¡n quÄƒng Ä‘á»‘ng code áº©u, code bá»«a vÃ o dá»± Ã¡n.</p>

<p>NgÃ y nay, háº§u háº¿t cÃ¡c IDE Ä‘á»u cung cáº¥p cÃ¡c tÃ­nh nÄƒng Ä‘áº·c biá»‡t Ä‘á»ƒ Ä‘á»‹nh vá»‹ cÃ¡c comment TODO, do Ä‘Ã³ báº¡n khÃ´ng cáº§n lo viá»‡c bá» quÃªn/láº¡c máº¥t nÃ³. Tuy váº­y, báº¡n sáº½ khÃ´ng muá»‘n code cá»§a báº¡n bá»‹ láº¥p Ä‘áº§y bá»Ÿi TODO. Váº­y nÃªn hÃ£y thÆ°á»ng xuyÃªn Ä‘á»ƒ máº¯t tá»›i chÃºng vÃ  dá»n dáº¹p chÃºng ngay khi cÃ³ thá»ƒ.</p>

<h3 id="khuáº¿ch-Ä‘áº¡i">Khuáº¿ch Ä‘áº¡i</h3>

<p>Comment cÃ³ thá»ƒ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ khuáº¿ch Ä‘áº¡i táº§m quan trá»ng cá»§a má»™t cÃ¡i gÃ¬ Ä‘Ã³ cÃ³ váº» khÃ´ng quan trá»ng:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">String</span> <span class="n">listItemContent</span> <span class="o">=</span> <span class="n">match</span><span class="o">.</span><span class="na">group</span><span class="o">(</span><span class="mi">3</span><span class="o">).</span><span class="na">trim</span><span class="o">();</span>
<span class="c1">// the trim is real important. It removes the starting</span>
<span class="c1">// spaces that could cause the item to be recognized</span>
<span class="c1">// as another list.</span>
<span class="k">new</span> <span class="nf">ListItemWidget</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="n">listItemContent</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">level</span> <span class="o">+</span> <span class="mi">1</span><span class="o">);</span>
<span class="k">return</span> <span class="nf">buildList</span><span class="o">(</span><span class="n">text</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="n">match</span><span class="o">.</span><span class="na">end</span><span class="o">()));</span>
</code></pre></div></div>

<h3 id="javadocs-in-public-apis">Javadocs in Public APIs</h3>

<p>KhÃ´ng cÃ³ gÃ¬ há»¯u Ã­ch vÃ  tuyá»‡t vá»i báº±ng má»™t public API Ä‘Æ°á»£c mÃ´ táº£ tá»‘t. CÃ¡c javadoc cá»§a thÆ° viá»‡n chuáº©n cá»§a Java lÃ  má»™t trÆ°á»ng há»£p Ä‘iá»ƒn hÃ¬nh. Sáº½ ráº¥t khÃ³ Ä‘á»ƒ viáº¿t cÃ¡c chÆ°Æ¡ng trÃ¬nh Java mÃ  thiáº¿u chÃºng.</p>

<p>Náº¿u Ä‘ang viáº¿t má»™t public API, cháº¯c cháº¯n báº¡n nÃªn viáº¿t javadoc tá»‘t cho nÃ³. NhÆ°ng hÃ£y ghi nhá»› nhá»¯ng lá»i khuyÃªn cÃ²n láº¡i cá»§a chÆ°Æ¡ng nÃ y, cÃ¡c javadoc cÃ³ thá»ƒ lÃ  má»™t cÃº lá»«a, hoáº·c mang láº¡i phiá»n toÃ¡i nhÆ° báº¥t ká»³ comment nÃ o khÃ¡c .</p>

<h2 id="bad-comments">Bad Comments</h2>

<p>Äa sá»‘ cÃ¡c comment rÆ¡i vÃ o thá»ƒ loáº¡i nÃ y. ChÃºng thÆ°á»ng Ä‘Æ°á»£c sá»­ dá»¥ng nhÆ° cÃ¡i cá»› cho viá»‡c viáº¿t code rá»Ÿm hoáº·c biá»‡n minh cho cÃ¡c cÃ¡ch giáº£i quyáº¿t Ä‘áº§y thiáº¿u sÃ³t, cÃ¡c giÃ¡ trá»‹ khÃ´ng Ä‘áº§y Ä‘á»§ so vá»›i cÃ¡ch láº­p trÃ¬nh viÃªn nghÄ© vá» nÃ³.</p>

<h3 id="Ä‘á»™c-thoáº¡i">Äá»™c thoáº¡i</h3>

<p>QuÄƒng vÃ o má»™t comment chá»‰ vÃ¬ báº¡n tháº¥y <em>thÃ­ch</em>, hoáº·c chá»‰ vÃ¬ quÃ¡ trÃ¬nh xá»­ lÃ½ cáº§n Ä‘áº¿n nÃ³, Ä‘iá»u Ä‘Ã³ Ä‘Æ°á»£c gá»i lÃ  <em>hack</em> (giáº£i quyáº¿t váº¥n Ä‘á» khÃ´ng theo cÃ¡ch thÆ°á»ng mÃ  dÃ¹ng thá»§ thuáº­t, Ä‘Æ°á»ng táº¯t,â€¦). Náº¿u báº¡n quyáº¿t Ä‘á»‹nh viáº¿t comment, hÃ£y dÃ nh thá»i gian cho nÃ³ Ä‘á»ƒ Ä‘áº£m báº£o Ä‘Ã³ lÃ  comment tá»‘t nháº¥t mÃ  báº¡n cÃ³ thá»ƒ viáº¿t.</p>

<p>DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ tÃ´i tÃ¬m tháº¥y trong FitNesse, comment nÃ y cÃ³ thá»ƒ há»¯u Ã­ch. NhÆ°ng tÃ¡c giáº£ Ä‘Ã£ vá»™i vÃ ng hoáº·c Ä‘Ã£ khÃ´ng quan tÃ¢m nhiá»u Ä‘áº¿n nÃ³. CÃ¡ch anh ta Ä‘á»™c thoáº¡i lÃ m cho ngÆ°á»i Ä‘áº¿n sau cáº£m tháº¥y hoang mang:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kt">void</span> <span class="nf">loadProperties</span><span class="o">()</span>
<span class="o">{</span>
    <span class="k">try</span>
    <span class="o">{</span>
        <span class="nc">String</span> <span class="n">propertiesPath</span> <span class="o">=</span> <span class="n">propertiesLocation</span> <span class="o">+</span> <span class="s">"/"</span> <span class="o">+</span> <span class="no">PROPERTIES_FILE</span><span class="o">;</span>
        <span class="nc">FileInputStream</span> <span class="n">propertiesStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">propertiesPath</span><span class="o">);</span>
        <span class="n">loadedProperties</span><span class="o">.</span><span class="na">load</span><span class="o">(</span><span class="n">propertiesStream</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">catch</span><span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="c1">// No properties files means all defaults are loaded</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Comment trong khá»‘i cacth trÃªn nghÄ©a lÃ  gÃ¬? Háº³n lÃ  nÃ³ cÃ³ Ã½ nghÄ©a gÃ¬ Ä‘Ã³ Ä‘á»‘i vá»›i tÃ¡c giáº£, nhÆ°ng láº¡i khÃ´ng Ä‘Æ°á»£c diá»…n giáº£i Ä‘áº§y Ä‘á»§. RÃµ rÃ ng, náº¿u IOExeptionxÃ£y ra, Ä‘iá»u Ä‘Ã³ cÃ³ nghÄ©a lÃ  khÃ´ng cÃ³ thuá»™c tÃ­nh file, vÃ  trong trÆ°á»ng há»£p nÃ y cÃ¡c thuá»™c tÃ­nh máº·c Ä‘á»‹nh sáº½ Ä‘Æ°á»£c táº£i. NhÆ°ng, cÃ¡i gÃ¬ sáº½ táº£i thuá»™c tÃ­nh máº·c Ä‘á»‹nh? Nhá»¯ng thuá»™c tÃ­nh máº·c Ä‘á»‹nh Ä‘Ã³ Ä‘Ã£ Ä‘Æ°á»£c táº£i trÆ°á»›c khi gá»i loadProperties()? Hay chÃºng Ä‘Æ°á»£c táº£i khi loadedProperties.load(propertiesStream) phÃ¡t sinh Exception? Hay chÃºng Ä‘Æ°á»£c táº£i sau khi gá»i loadProperties() ? CÃ³ pháº£i tÃ¡c giáº£ chá»‰ Ä‘ang cá»‘ lÃ m hÃ i lÃ²ng chÃ­nh báº£n thÃ¢n anh ta vá» viá»‡c bá» trá»‘ng khá»‘i catch? Hoáº·c, kinh khá»§ng hÆ¡n â€“ tÃ¡c giáº£ Ä‘Ã£ dÃ¹ng comment nhÆ° má»™t dáº¥u hiá»‡u, Ä‘á»ƒ sau nÃ y quay láº¡i vÃ  viáº¿t cÃ¡c Ä‘oáº¡n code táº£i cÃ¡c thuá»™c tÃ­nh máº·c Ä‘á»‹nh vÃ o khá»‘i catch?</p>

<p>CÃ¡ch duy nháº¥t lÃ  kiá»ƒm tra code cá»§a há»‡ thá»‘ng Ä‘á»ƒ tÃ¬m hiá»ƒu nhá»¯ng gÃ¬ xáº£y ra. Báº¥t ká»³ comment nÃ o khiáº¿n báº¡n pháº£i lá»¥c tung code cá»§a há»‡ thá»‘ng lÃªn Ä‘á»ƒ tÃ¬m hiá»ƒu thÃ¬ comment Ä‘Ã³ khÃ´ng truyá»n táº£i tá»‘t thÃ´ng tin cho báº¡n, vÃ  nÃ³ khÃ´ng xá»©ng Ä‘Ã¡ng vá»›i sá»‘ bit nÃ³ chiáº¿m trong mÃ£ nguá»“n.</p>

<h3 id="cÃ¡c-comment-thá»«a-tháº£i">CÃ¡c comment thá»«a tháº£i</h3>

<p>Listing 4-1 cho tháº¥y má»™t hÃ m Ä‘Æ¡n giáº£n vá»›i cÃ¡c comment á»Ÿ Ä‘áº§u hoÃ n toÃ n thá»«a tháº£i. Comment nÃ y, cÃ³ láº½, cÃ²n lÃ m ngÆ°á»i Ä‘á»c máº¥t thá»i gian hÆ¡n so vá»›i viá»‡c Ä‘á»c code cá»§a hÃ m.</p>

<p>| Listing 4-1 <strong>waitForClose</strong> |
| â€” |</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Utility method that returns when this.closed is true. Throws an exception</span>
<span class="c1">// if the timeout is reached.</span>
<span class="c1">// PhÆ°Æ¡ng thá»©c return khi this.closed lÃ  true, phÃ¡t sinh ngoáº¡i lá»‡ náº¿u háº¿t thá»i gian chá»</span>
<span class="kd">public</span> <span class="kd">synchronized</span> <span class="kt">void</span> <span class="nf">waitForClose</span><span class="o">(</span><span class="kd">final</span> <span class="kt">long</span> <span class="n">timeoutMillis</span><span class="o">)</span>
<span class="kd">throws</span> <span class="nc">Exception</span>
<span class="o">{</span>
    <span class="k">if</span><span class="o">(!</span><span class="n">closed</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">wait</span><span class="o">(</span><span class="n">timeoutMillis</span><span class="o">);</span>
        <span class="k">if</span><span class="o">(!</span><span class="n">closed</span><span class="o">)</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">Exception</span><span class="o">(</span><span class="s">"MockResponseSender could not be closed"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Comment nÃ y nháº±m má»¥c Ä‘Ã­ch gÃ¬? NÃ³ cháº¯n cháº¯n khÃ´ng cung cáº¥p nhiá»u thÃ´ng tin hÆ¡n code. NÃ³ khÃ´ng diá»…n giáº£i cho code, khÃ´ng cung cáº¥p má»¥c Ä‘Ã­ch hoáº·c lÃ½ do. NÃ³ khÃ´ng dá»… hiá»ƒu hÆ¡n code. Sá»± tháº­t lÃ , nÃ³ Ã­t chÃ­nh xÃ¡c hÆ¡n code nhÆ°ng láº¡i lÃ´i cuá»‘n ngÆ°á»i Ä‘á»c cháº¥p nháº­n sá»± thiáº¿u chÃ­nh xÃ¡c Ä‘Ã³ thay cho hiá»ƒu biáº¿t tháº­t sá»±.</p>

<p>BÃ¢y giá» hÃ£y xem xÃ©t vÃ´ sá»‘ comment vÃ´ Ã­ch vÃ  dÆ° thá»«a cá»§a javadocs trong Listing 4-2 Ä‘Æ°á»£c láº¥y tá»« Tomcat. Nhá»¯ng comment nÃ y chá»‰ Ä‘á»ƒ lÃ m lá»™n xá»™n vÃ  lÃ m code thÃªm khÃ³ hiá»ƒu. ChÃºng tá»“n táº¡i nhÆ°ng khÃ´ng vÃ¬ má»¥c Ä‘Ã­ch cung cáº¥p thÃ´ng tin mÃ  chá»‰ khiáº¿n má»i thá»© tá»‡ hÆ¡n. TÃ´i chá»‰ chá»‰ ra cho báº¡n Ä‘Æ°á»£c má»™t vÃ i dÃ²ng Ä‘áº§u tiÃªn, cÃ²n nhiá»u hÆ¡n ná»¯a náº¿u báº¡n xem qua háº¿t module nÃ y.</p>

<p>| Listing 4-2 <strong>ContainerBase.java (Tomcat)</strong> |
| â€” |</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">ContainerBase</span>
<span class="kd">implements</span> <span class="nc">Container</span><span class="o">,</span> <span class="nc">Lifecycle</span><span class="o">,</span> <span class="nc">Pipeline</span><span class="o">,</span>
<span class="nc">MBeanRegistration</span><span class="o">,</span> <span class="nc">Serializable</span> <span class="o">{</span>
    <span class="cm">/**
     * The processor delay for this component.
     */</span>
    <span class="kd">protected</span> <span class="kt">int</span> <span class="n">backgroundProcessorDelay</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
    <span class="cm">/**
     * The lifecycle event support for this component.
     */</span>
    <span class="kd">protected</span> <span class="nc">LifecycleSupport</span> <span class="n">lifecycle</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">LifecycleSupport</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="cm">/**
     * The container event listeners for this Container.
     */</span>
    <span class="kd">protected</span> <span class="nc">ArrayList</span> <span class="n">listeners</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ArrayList</span><span class="o">();</span>
    <span class="cm">/**
     * The Loader implementation with which this Container is
     * associated.
     */</span>
    <span class="kd">protected</span> <span class="nc">Loader</span> <span class="n">loader</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * The Logger implementation with which this Container is
     * associated.
     */</span>
    <span class="kd">protected</span> <span class="nc">Log</span> <span class="n">logger</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * Associated logger name.
     */</span>
    <span class="kd">protected</span> <span class="nc">String</span> <span class="n">logName</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * The Manager implementation with which this Container is
     * associated.
     */</span>
    <span class="kd">protected</span> <span class="nc">Manager</span> <span class="n">manager</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * The cluster with which this Container is associated.
     */</span>
    <span class="kd">protected</span> <span class="nc">Cluster</span> <span class="n">cluster</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * The human-readable name of this Container.
     */</span>
    <span class="kd">protected</span> <span class="nc">String</span> <span class="n">name</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * The parent Container to which this Container is a child.
     */</span>
    <span class="kd">protected</span> <span class="nc">Container</span> <span class="n">parent</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * The parent class loader to be configured when we install a
     * Loader.
     */</span>
    <span class="kd">protected</span> <span class="nc">ClassLoader</span> <span class="n">parentClassLoader</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * The Pipeline object with which this Container is
     * associated.
     */</span>
    <span class="kd">protected</span> <span class="nc">Pipeline</span> <span class="n">pipeline</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StandardPipeline</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>
    <span class="cm">/**
     * The Realm with which this Container is associated.
     */</span>
    <span class="kd">protected</span> <span class="nc">Realm</span> <span class="n">realm</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
    <span class="cm">/**
     * The resources DirContext object with which this Container
     * is associated.
     */</span>
    <span class="kd">protected</span> <span class="nc">DirContext</span> <span class="n">resources</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
</code></pre></div></div>

<h3 id="cÃ¡c-comment-sai-sá»±-tháº­t">CÃ¡c comment sai sá»± tháº­t</h3>

<p>ÄÃ´i khi, vá»›i má»¥c Ä‘Ã­ch hoÃ n toÃ n trong sÃ¡ng, má»™t láº­p trÃ¬nh viÃªn diá»…n Ä‘áº¡t Ã½ Ä‘á»‹nh cá»§a anh ta trong comment, nhÆ°ng nÃ³ láº¡i khÃ´ng Ä‘á»§ chÃ­nh xÃ¡c. HÃ£y dÃ nh má»™t Ã­t thá»i gian Ä‘á»ƒ xem láº¡i comment dÆ° thá»«a vÃ  sai lá»‡ch trong Listing 4-1.</p>

<p>Báº¡n cÃ³ phÃ¡t hiá»‡n ra comment á»Ÿ Listing 4-1 sai lá»‡ch nhÆ° tháº¿ nÃ o chÆ°a? PhÆ°Æ¡ng thá»©c khÃ´ng <code class="language-plaintext highlighter-rouge">return</code> khi <code class="language-plaintext highlighter-rouge">this.closed</code> lÃ  <code class="language-plaintext highlighter-rouge">true</code>, nÃ³ <code class="language-plaintext highlighter-rouge">return</code> náº¿u <code class="language-plaintext highlighter-rouge">this.closed</code> lÃ  <code class="language-plaintext highlighter-rouge">true</code>. Máº·t khÃ¡c, nÃ³ giáº£ vá» chá» má»™t khoáº£n thá»i gian vÃ  sinh ra má»™t Exception náº¿u <code class="language-plaintext highlighter-rouge">this.closed</code> váº«n chÆ°a lÃ  <code class="language-plaintext highlighter-rouge">true</code>.</p>

<p>Má»™t chÃºt thÃ´ng tin sai lá»‡ch, áº©n náº¥p trong má»™t comment khÃ³ Ä‘á»c hÆ¡n cáº£ code mÃ  nÃ³ diá»…n giáº£i. Äiá»u nÃ y cÃ³ thá»ƒ khiáº¿n má»™t láº­p trÃ¬nh viÃªn khÃ¡c gá»i hÃ m nÃ y vÃ  mong muá»‘n nÃ³ return ngay khi this.closed trá»Ÿ thÃ nh true. Sau Ä‘Ã³ anh ta pháº£i debug chÆ°Æ¡ng trÃ¬nh Ä‘á»ƒ tÃ¬m cÃ¢u tráº£ lá»i cho viá»‡c nÃ³ thá»±c thi quÃ¡ cháº­m.</p>

<h3 id="cÃ¡c-comment-báº¯t-buá»™c">CÃ¡c comment báº¯t buá»™c</h3>

<p>Tháº­t Ä‘iÃªn rá»“ khi cho ráº±ng táº¥t cáº£ cÃ¡c hÃ m Ä‘á»u pháº£i cÃ³ javadoc, hoáº·c má»i biáº¿n Ä‘á»u pháº£i cÃ³ comment. Nhá»¯ng comment nhÆ° váº­y chá»‰ lÃ m rá»‘i code, Ä‘Æ°a ra nhá»¯ng lá»i bá»‹a Ä‘áº·t, vÃ  á»§ng há»™ viá»‡c gÃ¢y nháº§m láº«n vÃ  vÃ´ tá»• chá»©c.</p>

<p>VÃ­ dá»¥, javadoc Ä‘Æ°á»£c yÃªu cáº§u cho má»i hÃ m dáº«n Ä‘áº¿n sá»± kinh khá»§ng khiáº¿p nhÆ° Listing 4-3. TÃ¬nh tráº¡ng lá»™n xá»™n nÃ y khÃ´ng giÃºp Ã­ch Ä‘Æ°á»£c gÃ¬ mÃ  ngÆ°á»£c láº¡i,nÃ³ chá»‰ lÃ m xÃ¡o trá»™n code vÃ  ngáº§m táº¡o ra nhá»¯ng cÃº lá»«a khÃ¡c,â€¦</p>

<p>| Listing 4-3 |
| â€” |</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 *
 * @param title The title of the CD
 * @param author The author of the CD
 * @param tracks The number of tracks on the CD
 * @param durationInMinutes The duration of the CD in minutes
 */</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">addCD</span><span class="o">(</span><span class="nc">String</span> <span class="n">title</span><span class="o">,</span> <span class="nc">String</span> <span class="n">author</span><span class="o">,</span>
 <span class="kt">int</span> <span class="n">tracks</span><span class="o">,</span> <span class="kt">int</span> <span class="n">durationInMinutes</span><span class="o">)</span> <span class="o">{</span>
    <span class="no">CD</span> <span class="n">cd</span> <span class="o">=</span> <span class="k">new</span> <span class="no">CD</span><span class="o">();</span>
    <span class="n">cd</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
    <span class="n">cd</span><span class="o">.</span><span class="na">author</span> <span class="o">=</span> <span class="n">author</span><span class="o">;</span>
    <span class="n">cd</span><span class="o">.</span><span class="na">tracks</span> <span class="o">=</span> <span class="n">tracks</span><span class="o">;</span>
    <span class="n">cd</span><span class="o">.</span><span class="na">duration</span> <span class="o">=</span> <span class="n">duration</span><span class="o">;</span>
    <span class="n">cdList</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">cd</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="cÃ¡c-comment-nháº­t-kÃ½">CÃ¡c comment nháº­t kÃ½</h3>

<p>ÄÃ´i khi má»i ngÆ°á»i thÃªm má»™t comment vÃ o Ä‘áº§u module má»—i khi há» chá»‰nh sá»­a nÃ³. Nhá»¯ng comment nÃ y tÃ­ch lÅ©y nhÆ° má»™t loáº¡i nháº­t kÃ½ lÆ°u láº¡i má»i thay Ä‘á»•i Ä‘Ã£ tá»«ng Ä‘Æ°á»£c thá»±c hiá»‡n. TÃ´i Ä‘Ã£ tháº¥y má»™t sá»‘ module vá»›i hÃ ng trÄƒm dÃ²ng nhÆ° tháº¿ nÃ y:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * Changes (from 11-Oct-2001)
 * --------------------------
 * 11-Oct-2001 : Re-organised the class and moved it to new package
 * com.jrefinery.date (DG);
 * 05-Nov-2001 : Added a getDescription() method, and eliminated NotableDate
 * class (DG);
 * 12-Nov-2001 : IBD requires setDescription() method, now that NotableDate
 * class is gone (DG); Changed getPreviousDayOfWeek(),
 * getFollowingDayOfWeek() and getNearestDayOfWeek() to correct
 * bugs (DG);
 * 05-Dec-2001 : Fixed bug in SpreadsheetDate class (DG);
 * 29-May-2002 : Moved the month constants into a separate interface
 * (MonthConstants) (DG);
 * 27-Aug-2002 : Fixed bug in addMonths() method, thanks to N???levka Petr (DG);
 * 03-Oct-2002 : Fixed errors reported by Checkstyle (DG);
 * 13-Mar-2003 : Implemented Serializable (DG);
 * 29-May-2003 : Fixed bug in addMonths method (DG);
 * 04-Sep-2003 : Implemented Comparable. Updated the isInRange javadocs (DG);
 * 05-Jan-2005 : Fixed bug in addYears() method (1096282) (DG);
 */</span>
</code></pre></div></div>

<p>NgÃ y xá»­a ngÃ y xÆ°a, chÃºng tÃ´i cÃ³ lÃ½ do chÃ­nh Ä‘Ã¡ng Ä‘á»ƒ táº¡o vÃ  cáº­p nháº­t cÃ¡c nháº­t kÃ½ nÃ y khi báº¯t Ä‘áº§u má»™t module. á» thá»i Ä‘iá»ƒm Ä‘Ã³, cÃ¡c há»‡ thá»‘ng quáº£n lÃ½ mÃ£ nguá»“n (source control) chÆ°a xuáº¥t hiá»‡n vÃ  chÃºng tÃ´i pháº£i thá»±c hiá»‡n Ä‘iá»u nÃ y. NhÆ°ng ngÃ y nay, nhá»¯ng nháº­t kÃ½ nÃ y chá»‰ lÃ m module lá»™n xá»™n hÆ¡n. ChÃºng nÃªn Ä‘Æ°á»£c loáº¡i bá» hoÃ n toÃ n.</p>

<h3 id="cÃ¡c-comment-gÃ¢y-nhiá»…u">CÃ¡c comment gÃ¢y nhiá»…u</h3>

<p>ÄÃ´i khi báº¡n gáº·p cÃ¡c comment khÃ´ng cung cáº¥p thÃ´ng tin gÃ¬ ngoÃ i sá»± phiá»n phá»©c, chÃºng láº·p láº¡i má»™t váº¥n Ä‘á» hiá»ƒn nhiÃªn vÃ  khÃ´ng cung cáº¥p thÃªm thÃ´ng tin má»›i</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Default constructor.
 */</span>
<span class="kd">protected</span> <span class="nf">AnnualDateRule</span><span class="o">()</span> <span class="o">{</span>
<span class="o">}</span>
</code></pre></div></div>

<p>RÃ¬a-lÃ½? CÃ²n cÃ¡i nÃ y:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/** The day of the month. */</span>
<span class="kd">private</span> <span class="kt">int</span> <span class="n">dayOfMonth</span><span class="o">;</span>
</code></pre></div></div>

<p>VÃ  sau Ä‘Ã³ lÃ  sá»± thá»«a thÃ£i nÃ y:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Returns the day of the month.
 *
 * @return the day of the month.
 */</span>
<span class="kd">public</span> <span class="kt">int</span> <span class="nf">getDayOfMonth</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">dayOfMonth</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Nhá»¯ng comment nÃ y phiá»n Ä‘áº¿n má»©c chÃºng tÃ´i pháº£i há»c cÃ¡ch bá» qua chÃºng. Khi chÃºng tÃ´i Ä‘á»c code, máº¯t chÃºng tÃ´i chá»‰ lÆ°á»›t qua chÃºng. Cuá»‘i cÃ¹ng, cÃ¡c comment báº¯t Ä‘áº§u sai lá»‡ch khi code xung quanh chÃºng thay Ä‘á»•i, cÃ²n chÃºng thÃ¬ khÃ´ng â€“ ai láº¡i Ä‘á»ƒ Ã½ Ä‘áº¿n chÃºng chá»©.</p>

<p>Comment Ä‘áº§u tiÃªn trong Listing 4-4 cÃ³ váº» há»£p lÃ½, nÃ³ giáº£i thÃ­ch táº¡i sao khá»‘i <code class="language-plaintext highlighter-rouge">catch</code> Ä‘Æ°á»£c bá» qua. NhÆ°ng comment thá»© hai chá»‰ Ä‘Æ¡n thuáº§n lÃ  gÃ¢y nhiá»…u cho ngÆ°á»i Ä‘á»c. RÃµ rÃ ng láº­p trÃ¬nh viÃªn nÃ y Ä‘Ã£ ráº¥t má»‡t má»i vá»›i viá»‡c viáº¿t cÃ¡c khá»‘i <code class="language-plaintext highlighter-rouge">try/catch</code> vÃ  anh ta Ä‘ang trÃºt giáº­n.</p>

<p>| Listing 4-4 <strong>startSending</strong> |
| â€” |</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">startSending</span><span class="o">()</span>
<span class="o">{</span>
    <span class="k">try</span>
    <span class="o">{</span>
        <span class="n">doSending</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">catch</span><span class="o">(</span><span class="nc">SocketException</span> <span class="n">e</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="c1">// normal. someone stopped the request.</span>
    <span class="o">}</span>
    <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">try</span>
        <span class="o">{</span>
            <span class="n">response</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">ErrorResponder</span><span class="o">.</span><span class="na">makeExceptionString</span><span class="o">(</span><span class="n">e</span><span class="o">));</span>
            <span class="n">response</span><span class="o">.</span><span class="na">closeAll</span><span class="o">();</span>
        <span class="o">}</span>
        <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e1</span><span class="o">)</span>
        <span class="o">{</span>
            <span class="c1">//Give me a break! â€“ ÄÆ°a tao ra khá»i Ä‘Ã¢y!</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Thay vÃ¬ trÃºt giáº­n vÃ o má»™t comment vÃ´ giÃ¡ trá»‹ vÃ  gÃ¢y bá»‘i rá»‘i cho ngÆ°á»i Ä‘á»c, láº­p trÃ¬nh viÃªn nÃªn nháº­n ra ráº±ng váº¥n Ä‘á» cá»§a anh ta cÃ³ thá»ƒ Ä‘Æ°á»£c giáº£i quyáº¿t báº±ng cÃ¡ch tÃ¡i cáº¥u trÃºc láº¡i pháº§n code Ä‘Ã³. Anh ta nÃªn sá»­ dá»¥ng nÄƒng lÆ°á»£ng cá»§a mÃ¬nh cho viá»‡c chuyá»ƒn khá»‘i try/catch Ä‘Ã³ thÃ nh má»™t hÃ m riÃªng biá»‡t, nhÆ° trong Listing 4-5</p>

<p>| Listing 4-5 <strong>startSending (refactored)</strong> |
| â€” |</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">startSending</span><span class="o">()</span>
<span class="o">{</span>
    <span class="k">try</span>
    <span class="o">{</span>
        <span class="n">doSending</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">catch</span><span class="o">(</span><span class="nc">SocketException</span> <span class="n">e</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="c1">// normal. someone stopped the request.</span>
    <span class="o">}</span>
    <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">addExceptionAndCloseResponse</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
<span class="kd">private</span> <span class="kt">void</span> <span class="nf">addExceptionAndCloseResponse</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span>
<span class="o">{</span>
    <span class="k">try</span>
    <span class="o">{</span>
        <span class="n">response</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="nc">ErrorResponder</span><span class="o">.</span><span class="na">makeExceptionString</span><span class="o">(</span><span class="n">e</span><span class="o">));</span>
        <span class="n">response</span><span class="o">.</span><span class="na">closeAll</span><span class="o">();</span>
    <span class="o">}</span>
    <span class="k">catch</span><span class="o">(</span><span class="nc">Exception</span> <span class="n">e1</span><span class="o">)</span>
    <span class="o">{</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>TrÃ¡nh viá»‡c viáº¿t comment gÃ¢y nhiá»…u báº±ng quyáº¿t tÃ¢m lÃ m sáº¡ch code. Báº¡n sáº½ tháº¥y Ä‘iá»u Ä‘Ã³ lÃ m cho báº¡n trá»Ÿ thÃ nh má»™t láº­p trÃ¬nh viÃªn Ä‘áº³ng cáº¥p hÆ¡n, vÃ  háº¡nh phÃºc hÆ¡n.</p>

<h3 id="láº¡i-lÃ -cÃ¡c-comment-gÃ¢y-nhiá»…u--nhÆ°ng-Ä‘Ã¡ng-sá»£-hÆ¡n">(Láº¡i lÃ ) cÃ¡c comment gÃ¢y nhiá»…u â€“ nhÆ°ng Ä‘Ã¡ng sá»£ hÆ¡n</h3>

<p>CÃ¡c javadoc cÅ©ng cÃ³ thá»ƒ trá»Ÿ nÃªn phiá»n phá»©c. Má»¥c Ä‘Ã­ch cá»§a cÃ¡c javadoc sau lÃ  gÃ¬ (tá»« má»™t thÆ° viá»‡n mÃ£ nguá»“n má»Ÿ ná»•i tiáº¿ng)? Tráº£ lá»i: KhÃ´ng gÃ¬ cáº£. ChÃºng chá»‰ lÃ  nhá»¯ng comment dÆ° thá»«a, bá»‹ sao chÃ©p láº¡i nhÆ° má»™t khao khÃ¡t cung cáº¥p tÃ i liá»‡u cho láº­p trÃ¬nh viÃªn.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/** The name. */</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">name</span><span class="o">;</span>
<span class="cm">/** The version. */</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">version</span><span class="o">;</span>
<span class="cm">/** The licenceName. */</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">licenceName</span><span class="o">;</span>
<span class="cm">/** The version. */</span>
<span class="kd">private</span> <span class="nc">String</span> <span class="n">info</span><span class="o">;</span>
</code></pre></div></div>

<p>Xem nhá»¯ng comment trÃªn má»™t láº§n ná»¯a, báº¡n cÃ³ tháº¥y lá»—i cáº¯t-dÃ¡n khÃ´ng? Náº¿u tÃ¡c giáº£ Ä‘Ã£ khÃ´ng chÃº Ã½ Ä‘áº¿n comment khi viáº¿t (hoáº·c dÃ¡n) chÃºng, sao chÃºng ta cÃ³ thá»ƒ trÃ´ng mong chÃºng giÃºp Ã­ch Ä‘Æ°á»£c chÃºng ta?</p>

<h3 id="Ä‘á»«ng-dÃ¹ng-comment-khi-báº¡n-cÃ³-thá»ƒ-dÃ¹ng-hÃ m-hoáº·c-biáº¿n">Äá»«ng dÃ¹ng comment khi báº¡n cÃ³ thá»ƒ dÃ¹ng hÃ m hoáº·c biáº¿n</h3>

<p>HÃ£y xem xÃ©t Ä‘oáº¡n code sau:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// does the module from the global list &lt;mod&gt; depend on the</span>
<span class="c1">// subsystem we are part of?</span>
<span class="k">if</span> <span class="o">(</span><span class="n">smodule</span><span class="o">.</span><span class="na">getDependSubsystems</span><span class="o">().</span><span class="na">contains</span><span class="o">(</span><span class="n">subSysMod</span><span class="o">.</span><span class="na">getSubSystem</span><span class="o">()))</span>
</code></pre></div></div>

<p>ChÃºng cÃ³ thá»ƒ Ä‘Æ°á»£c viáº¿t láº¡i mÃ  khÃ´ng cáº§n comment:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">ArrayList</span> <span class="n">moduleDependees</span> <span class="o">=</span> <span class="n">smodule</span><span class="o">.</span><span class="na">getDependSubsystems</span><span class="o">();</span>
<span class="nc">String</span> <span class="n">ourSubSystem</span> <span class="o">=</span> <span class="n">subSysMod</span><span class="o">.</span><span class="na">getSubSystem</span><span class="o">();</span>
<span class="k">if</span> <span class="o">(</span><span class="n">moduleDependees</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">ourSubSystem</span><span class="o">))</span>
</code></pre></div></div>

<p>CÃ³ thá»ƒ tÃ¡c giáº£ Ä‘Ã£ viáº¿t comment trÆ°á»›c (tÃ´i Ä‘oÃ¡n tháº¿), vÃ  sau Ä‘Ã³ viáº¿t code Ä‘á»ƒ hoÃ n thÃ nh ná»™i dung cá»§a comment. Tuy nhiÃªn, tÃ¡c giáº£ nÃªn tÃ¡i cáº¥u trÃºc code, nhÆ° tÃ´i Ä‘Ã£ lÃ m, Ä‘á»ƒ comment Ä‘Æ°á»£c xÃ³a mÃ  khÃ´ng áº£nh hÆ°á»Ÿng Ä‘áº¿n thÃ´ng Ä‘iá»‡p cá»§a Ä‘oáº¡n code Ä‘Ã³.</p>

<h3 id="Ä‘Ã¡nh-dáº¥u-lÃ£nh-thá»•">ÄÃ¡nh dáº¥u lÃ£nh thá»•</h3>

<p>Thá»‰nh thoáº£ng vÃ i láº­p trÃ¬nh viÃªn thÃ­ch Ä‘Ã¡nh dáº¥u má»™t vá»‹ trÃ­ trong tá»‡p mÃ£ nguá»“n. VÃ­ dá»¥, gáº§n Ä‘Ã¢y tÃ´i Ä‘Ã£ tháº¥y thá»© nÃ y trong má»™t chÆ°Æ¡ng trÃ¬nh tÃ´i Ä‘ang xem xÃ©t:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Actions //////////////////////////////////</span>
</code></pre></div></div>

<p>Ráº¥t hiáº¿m khi cÃ¡c hÃ m cÃ³ cÃ¹ng chá»©c nÄƒng Ä‘Æ°á»£c táº­p há»£p bÃªn dÆ°á»›i má»™t cÃ¢u miÃªu táº£ nhÆ° tháº¿ nÃ y. NhÆ°ng nÃ³i chung, chÃºng Ä‘ang bá»«a bá»™n nÃªn cáº§n pháº£i loáº¡i bá», Ä‘áº·c biá»‡t lÃ  cáº£ tÃ¡ dáº¥u slash á»Ÿ cuá»‘i cÃ¢u.</p>

<p>Theo cÃ¡ch nghÄ© nÃ y, má»™t comment Ä‘Ã¡nh dáº¥u sáº½ gÃ¢y chÃº Ã½ máº¡nh náº¿u báº¡n khÃ´ng thÆ°á»ng xuyÃªn nhÃ¬n tháº¥y chÃºng. VÃ¬ váº­y, hÃ£y háº¡n cháº¿ dÃ¹ng, vÃ  chá»‰ dÃ¹ng náº¿u chÃºng mang láº¡i lá»£i Ã­ch Ä‘Ã¡ng ká»ƒ. Náº¿u bá»‹ láº¡m dá»¥ng, chÃºng sáº½ bá»‹ ngÆ°á»i Ä‘á»c cho vÃ o vÃ¹ng â€œphiá»n phá»©câ€ vÃ  nhanh chÃ³ng bá»‹ bá» qua.</p>

<h3 id="cÃ¡c-comment-káº¿t-thÃºc">CÃ¡c comment káº¿t thÃºc</h3>

<p>ÄÃ´i khi cÃ¡c láº­p trÃ¬nh viÃªn sáº½ Ä‘Æ°a ra cÃ¡c comment cá»¥ thá»ƒ vá» viá»‡c Ä‘Ã³ng dáº¥u ngoáº·c nhá»n, nhÆ° trong Listing 4-6. Máº·c dÃ¹ Ä‘iá»u nÃ y cÃ³ thá»ƒ cÃ³ Ã½ nghÄ©a vá»›i cÃ¡c hÃ m dÃ i vÃ  cÃ³ nhiá»u cáº¥u trÃºc lá»“ng nhau, nhÆ°ng chÃºng láº¡i thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng trong cÃ¡c hÃ m nhá», hoáº·c cÃ¡c hÃ m mÃ  láº­p trÃ¬nh viÃªn tháº¥y thÃ­ch. VÃ¬ váº­y láº§n tá»›i náº¿u muá»‘n Ä‘Ã¡nh dáº¥u káº¿t thÃºc má»™t khá»‘i lá»‡nh phá»©c táº¡p, hÃ£y thá»­ chia nhá» hoáº·c rÃºt ngáº¯n hÃ m cá»§a báº¡n.</p>

<p>| Listing 4-6 <strong>wc.java</strong> |
| â€” |</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">wc</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">));</span>
        <span class="nc">String</span> <span class="n">line</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">lineCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">charCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">wordCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">while</span> <span class="o">((</span><span class="n">line</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">())</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">lineCount</span><span class="o">++;</span>
                <span class="n">charCount</span> <span class="o">+=</span> <span class="n">line</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
                <span class="nc">String</span> <span class="n">words</span><span class="o">[]</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">"\\W"</span><span class="o">);</span>
                <span class="n">wordCount</span> <span class="o">+=</span> <span class="n">words</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
            <span class="o">}</span> <span class="c1">//while</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"wordCount = "</span> <span class="o">+</span> <span class="n">wordCount</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"lineCount = "</span> <span class="o">+</span> <span class="n">lineCount</span><span class="o">);</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"charCount = "</span> <span class="o">+</span> <span class="n">charCount</span><span class="o">);</span>
        <span class="o">}</span> <span class="c1">// try</span>
        <span class="k">catch</span> <span class="o">(</span><span class="nc">IOException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="nc">System</span><span class="o">.</span><span class="na">err</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Error:"</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
        <span class="o">}</span> <span class="c1">//catch</span>
    <span class="o">}</span> <span class="c1">//main</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="thuá»™c-tÃ­nh-vÃ -dÃ²ng-tÃ¡c-giáº£">Thuá»™c tÃ­nh vÃ  dÃ²ng tÃ¡c giáº£</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/* Added by Rick */</span>
</code></pre></div></div>

<p>Há»‡ thá»‘ng quáº£n lÃ½ mÃ£ nguá»“n ghi nhá»› ráº¥t tá»‘t viá»‡c ai Ä‘Ã£ thÃªm gÃ¬, thÃªm khi nÃ o,.. KhÃ´ng cáº§n pháº£i lÃ m Ã´ nhiá»…m code báº±ng nhá»¯ng dÃ²ng tÃ¡c giáº£. Báº¡n cÃ³ thá»ƒ nghÄ© ráº±ng nhá»¯ng comment nhÆ° váº­y sáº½ há»¯u Ã­ch, ngÆ°á»i khÃ¡c sáº½ biáº¿t ai Ä‘Ã£ lÃ m viá»‡c vá»›i pháº§n code Ä‘Ã³. NhÆ°ng thá»±c táº¿ lÃ  chÃºng cÃ³ xu hÆ°á»›ng á»Ÿ láº¡i Ä‘Ã³ trong nhiá»u nÄƒm, vÃ  ngÃ y cÃ ng Ã­t chÃ­nh xÃ¡c, vÃ  Ã­t liÃªn quan.</p>

<p>Nháº¯c láº¡i láº§n ná»¯a, há»‡ thá»‘ng quáº£n lÃ½ mÃ£ nguá»“n lÃ  nÆ¡i tá»‘t hÆ¡n Ä‘á»ƒ lÆ°u nhá»¯ng thÃ´ng tin nÃ y.</p>

<h3 id="comment-hÃ³a-code">Comment-hÃ³a code</h3>

<p>Comment-hÃ³a code (chuyá»ƒn code thÃ nh comment) lÃ  má»™t trong nhá»¯ng thÃ³i quen khiáº¿n láº­p trÃ¬nh viÃªn dá»… bá»‹ ghÃ©t nháº¥t. Äá»«ng lÃ m viá»‡c Ä‘Ã³!</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">InputStreamResponse</span> <span class="n">response</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">InputStreamResponse</span><span class="o">();</span>
<span class="n">response</span><span class="o">.</span><span class="na">setBody</span><span class="o">(</span><span class="n">formatter</span><span class="o">.</span><span class="na">getResultStream</span><span class="o">(),</span> <span class="n">formatter</span><span class="o">.</span><span class="na">getByteCount</span><span class="o">());</span>
<span class="c1">// InputStream resultsStream = formatter.getResultStream();</span>
<span class="c1">// StreamReader reader = new StreamReader(resultsStream);</span>
<span class="c1">// response.setContent(reader.read(formatter.getByteCount()));</span>
</code></pre></div></div>

<p>Nhá»¯ng ngÆ°á»i khÃ¡c khi tháº¥y comment dáº¡ng nÃ y sáº½ khÃ´ng Ä‘á»§ dÅ©ng cáº£m Ä‘á»ƒ xÃ³a nÃ³. Há» nghÄ© ráº±ng nÃ³ náº±m Ä‘Ã³ vÃ¬ má»™t lÃ½ do nÃ o Ä‘Ã³, vÃ  cháº¯c háº³n lÃ  nÃ³ quan trá»ng.</p>

<p>HÃ£y xem xÃ©t Ä‘oáº¡n code dÆ°á»›i Ä‘Ã¢y:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">this</span><span class="o">.</span><span class="na">bytePos</span> <span class="o">=</span> <span class="n">writeBytes</span><span class="o">(</span><span class="n">pngIdBytes</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>
<span class="c1">//hdrPos = bytePos;</span>
<span class="n">writeHeader</span><span class="o">();</span>
<span class="n">writeResolution</span><span class="o">();</span>
<span class="c1">//dataPos = bytePos;</span>
<span class="k">if</span> <span class="o">(</span><span class="n">writeImageData</span><span class="o">())</span> <span class="o">{</span>
    <span class="n">writeEnd</span><span class="o">();</span>
    <span class="k">this</span><span class="o">.</span><span class="na">pngBytes</span> <span class="o">=</span> <span class="n">resizeByteArray</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">pngBytes</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">maxPos</span><span class="o">);</span>
<span class="o">}</span>
<span class="k">else</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">pngBytes</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="o">}</span>
<span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">pngBytes</span><span class="o">;</span>
</code></pre></div></div>

<p>Táº¡i sao láº¡i cÃ³ hai dÃ²ng code bá»‹ chuyá»ƒn thÃ nh comment? ChÃºng cÃ³ quan trá»ng khÃ´ng? CÃ³ pháº£i chÃºng Ä‘á»ƒ láº¡i má»™t lá»i nháº¯c cho má»™t sá»‘ thay Ä‘á»•i sáº¯p xáº£y ra? Hay chÃºng chá»‰ lÃ  má»™t dÃ²ng comment Ä‘Ã£ tá»“n táº¡i tá»« nhiá»u nÄƒm trÆ°á»›c vÃ  Ä‘Æ¡n giáº£n lÃ  khÃ´ng ai thÃ¨m dá»n dáº¹p?</p>

<p>ÄÃ£ tá»«ng cÃ³ má»™t thá»i gian, vÃ o nhá»¯ng nÄƒm 60, khi nhá»¯ng comment dáº¡ng nÃ y cÃ³ Ã­ch. NhÆ°ng hiá»‡n táº¡i há»‡ thá»‘ng quáº£n lÃ½ mÃ£ nguá»“n Ä‘ang vÃ  sáº½ tiáº¿p tá»¥c hoáº¡t Ä‘á»™ng tá»‘t. Há»‡ thá»‘ng quáº£n lÃ½ mÃ£ nguá»“n sáº½ nhá»› code cho tÃ´i vÃ  báº¡n, vÃ  cháº¯c cháº¯n khÃ´ng cÃ³ lÃ½ do gÃ¬ Ä‘á»ƒ comment-hÃ³a má»™t dÃ²ng code. HÃ£y xÃ³a dÃ²ng code Ä‘Ã³, chÃºng ta sáº½ khÃ´ng bá»‹ máº¥t nÃ³. TÃ´i thá» Ä‘áº¥y.</p>

<h3 id="html-comment">HTML comment</h3>

<p>ÄÆ°a HTML vÃ o comment lÃ  má»™t hÃ nh Ä‘á»™ng xÃºc pháº¡m láº­p trÃ¬nh viÃªn. NhÆ° cÃ¡ch mÃ  báº¡n tháº¥y bÃªn dÆ°á»›i. NÃ³ lÃ m comment khÃ³ Ä‘á»c trá»±c tiáº¿p nhÆ°ng láº¡i dá»… Ä‘á»c hÆ¡n trÃªn trÃ¬nh soáº¡n tháº£o hoáº·c IDE khÃ¡c. Náº¿u cÃ¡c comment Ä‘Æ°á»£c trÃ­ch xuáº¥t bá»Ÿi cÃ´ng cá»¥ vÃ  hiá»ƒn thá»‹ nhÆ° má»™t trang web, viá»‡c tÃ´ váº½ cho comment báº±ng HTML lÃ  trÃ¡ch nhiá»‡m cá»§a cÃ´ng cá»¥ Ä‘Ã³, chá»© khÃ´ng pháº£i cá»§a láº­p trÃ¬nh viÃªn.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Task to run fit tests.
 * This task runs fitnesse tests and publishes the results.
 * &lt;p/&gt;
 * &lt;pre&gt;
 * Usage:
 * &amp;lt;taskdef name=&amp;quot;execute-fitnesse-tests&amp;quot;
 * classname=&amp;quot;fitnesse.ant.ExecuteFitnesseTestsTask&amp;quot;
 * classpathref=&amp;quot;classpath&amp;quot; /&amp;gt;
 * OR
 * &amp;lt;taskdef classpathref=&amp;quot;classpath&amp;quot;
 * resource=&amp;quot;tasks.properties&amp;quot; /&amp;gt;
 * &lt;p/&gt;
 * &amp;lt;execute-fitnesse-tests
 * suitepage=&amp;quot;FitNesse.SuiteAcceptanceTests&amp;quot;
 * fitnesseport=&amp;quot;8082&amp;quot;
 * resultsdir=&amp;quot;${results.dir}&amp;quot;
 * resultshtmlpage=&amp;quot;fit-results.html&amp;quot;
 * classpathref=&amp;quot;classpath&amp;quot; /&amp;gt;
 * &lt;/pre&gt;
 */</span>
</code></pre></div></div>

<h3 id="thÃ´ng-tin-phi-táº­p-trung">ThÃ´ng tin phi táº­p trung</h3>

<p>Náº¿u báº¯t buá»™c pháº£i viáº¿t má»™t comment, hÃ£y Ä‘áº£m báº£o ráº±ng nÃ³ giáº£i thÃ­ch cho pháº§n code gáº§n nÃ³ nháº¥t. Äá»«ng cung cáº¥p thÃ´ng tin cá»§a toÃ n bá»™ há»‡ thá»‘ng trong má»™t comment cá»¥c bá»™. Xem xÃ©t vÃ­ dá»¥ dÆ°á»›i Ä‘Ã¢y: DÃ¹ thá»«a tháº£i nhÆ°ng nÃ³ cung cáº¥p thÃ´ng tin vá» cá»•ng máº·c Ä‘á»‹nh. Tuy nhiÃªn hÃ m nÃ y láº¡i hoÃ n toÃ n khÃ´ng cÃ³ quyá»n kiá»ƒm soÃ¡t cá»•ng máº·c Ä‘á»‹nh. Comment khÃ´ng mÃ´ táº£ cho hÃ m, mÃ  mÃ´ táº£ má»™t pháº§n nÃ o Ä‘Ã³ trong há»‡ thá»‘ng. Táº¥t nhiÃªn, khÃ´ng cÃ³ gÃ¬ Ä‘áº£m báº£o comment nÃ y sáº½ Ä‘Æ°á»£c thay Ä‘á»•i khi code mÃ  nÃ³ mÃ´ táº£ thay Ä‘á»•i.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * Port on which fitnesse would run. Defaults to &lt;b&gt;8082&lt;/b&gt;.
 *
 * @param fitnessePort
 */</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">setFitnessePort</span><span class="o">(</span><span class="kt">int</span> <span class="n">fitnessePort</span><span class="o">)</span>
<span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">fitnessePort</span> <span class="o">=</span> <span class="n">fitnessePort</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="quÃ¡-nhiá»u-thÃ´ng-tin">QuÃ¡ nhiá»u thÃ´ng tin</h3>

<p>Äá»«ng Ä‘Æ°a cÃ¡c cuá»™c tháº£o luáº­n hoáº·c mÃ´ táº£ khÃ´ng liÃªn quan vÃ o comment cá»§a báº¡n. Comment dÆ°á»›i Ä‘Ã¢y Ä‘Æ°á»£c láº¥y ra tá»« má»™t module cÃ³ chá»©c nÄƒng mÃ£ hÃ³a vÃ  giáº£i mÃ£ base64. Má»™t ngÆ°á»i nÃ o Ä‘Ã³ cÃ³ thá»ƒ Ä‘á»c code nÃ y mÃ  khÃ´ng cáº§n nhá»¯ng thÃ´ng tin phá»©c táº¡p tá»« comment.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 RFC 2045 - Multipurpose Internet Mail Extensions (MIME)
 Part One: Format of Internet Message Bodies
 section 6.8. Base64 Content-Transfer-Encoding
 The encoding process represents 24-bit groups of input bits as output
 strings of 4 encoded characters. Proceeding from left to right, a
 24-bit input group is formed by concatenating 3 8-bit input groups.
 These 24 bits are then treated as 4 concatenated 6-bit groups, each
 of which is translated into a single digit in the base64 alphabet.
 When encoding a bit stream via the base64 encoding, the bit stream
 must be presumed to be ordered with the most-significant-bit first.
 That is, the first bit in the stream will be the high-order bit in
 the first 8-bit byte, and the eighth bit will be the low-order bit in
 the first 8-bit byte, and so on.
 */</span>
</code></pre></div></div>

<h3 id="má»‘i-quan-há»‡-khÃ³-hiá»ƒu">Má»‘i quan há»‡ khÃ³ hiá»ƒu</h3>

<p>Sá»± káº¿t ná»‘i giá»¯a comment vÃ  code mÃ  nÃ³ mÃ´ táº£ nÃªn rÃµ rÃ ng. Náº¿u báº¡n gáº·p khá»• sá»Ÿ khi pháº£i viáº¿t comment, Ã­t nháº¥t báº¡n cÅ©ng muá»‘n ngÆ°á»i khÃ¡c nhÃ¬n vÃ o comment vÃ  hiá»ƒu nhá»¯ng gÃ¬ nÃ³ Ä‘ang nÃ³i vá» code.</p>

<p>Xem xÃ©t vÃ­ dá»¥ sau:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/*
 * start with an array that is big enough to hold all the pixels
 * (plus filter bytes), and an extra 200 bytes for header info
 * báº¯t Ä‘áº§u vá»›i má»™t máº£ng Ä‘á»§ lá»›n Ä‘á»ƒ chá»©a táº¥t cáº£ cÃ¡c pixel
 * (cá»™ng vá»›i má»™t sá»‘ byte cá»§a bá»™ lá»c), vÃ  thÃªm 200 byte cho tiÃªu Ä‘á»
 */</span>
 <span class="k">this</span><span class="o">.</span><span class="na">pngBytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[((</span><span class="k">this</span><span class="o">.</span><span class="na">width</span> <span class="o">+</span> <span class="mi">1</span><span class="o">)</span> <span class="o">*</span> <span class="k">this</span><span class="o">.</span><span class="na">height</span> <span class="o">*</span> <span class="mi">3</span><span class="o">)</span> <span class="o">+</span> <span class="mi">200</span><span class="o">];</span>
</code></pre></div></div>

<p>Má»™t byte cá»§a bá»™ lá»c nghÄ©a lÃ  gÃ¬? NÃ³ cÃ³ liÃªn quan gÃ¬ Ä‘áº¿n +1 khÃ´ng? Hay *3? Hay cáº£ hai? Táº¡i sao láº¡i lÃ  giÃ¡ trá»‹ 200 mÃ  khÃ´ng pháº£i giÃ¡ trá»‹ khÃ¡c? Má»¥c Ä‘Ã­ch cá»§a comment lÃ  Ä‘á»ƒ giáº£i thÃ­ch code, khÃ´ng pháº£i giáº£i thÃ­ch chÃ­nh nÃ³. Tháº­t Ä‘Ã¡ng tiáº¿c khi comment láº¡i cáº§n má»™t lá»i giáº£i thÃ­ch cho riÃªng mÃ¬nh.</p>

<h3 id="comment-lÃ m-tiÃªu-Ä‘á»-cho-hÃ m">Comment lÃ m tiÃªu Ä‘á» cho hÃ m</h3>

<p>CÃ¡c hÃ m ngáº¯n khÃ´ng cáº§n nhiá»u mÃ´ táº£. Äáº·t má»™t cÃ¡i tÃªn Ä‘á»§ tá»‘t cho hÃ m thÆ°á»ng tá»‘t hÆ¡n viá»‡c Ä‘áº·t má»™t comment á»Ÿ trÆ°á»›c hÃ m Ä‘Ã³.</p>

<h3 id="javadocs-trong-code-khÃ´ng-cÃ´ng-khai">Javadocs trong code khÃ´ng cÃ´ng khai</h3>

<p>[â€¦] Viá»‡c táº¡o cÃ¡c trang javadoc cho cÃ¡c lá»›p vÃ  cÃ¡c hÃ m trong há»‡ thá»‘ng thÆ°á»ng khÃ´ng há»¯u Ã­ch, vÃ  thá»§ tá»¥c bá»• sung cÃ¡c comment khÃ´ng khÃ¡c gÃ¬ sá»± lá»™n xá»™n vÃ  lÃ m máº¥t thá»i gian.</p>

<h3 id="vÃ­-dá»¥">VÃ­ dá»¥</h3>

<p>TÃ´i Ä‘Ã£ viáº¿t module trong Listing 4-7 cho <em>XP Immersion</em> Ä‘áº§u tiÃªn. NÃ³ Ä‘Æ°á»£c dá»± Ä‘á»‹nh lÃ  má»™t vÃ­ dá»¥ vá» phong cÃ¡ch viáº¿t code xáº¥u vÃ  comment xáº¥u. Kent Back sau Ä‘Ã³ Ä‘Ã£ tÃ¡i cáº¥u trÃºc code nÃ y láº¡i dÆ°á»›i hÃ¬nh thá»©c dá»… chá»‹u hÆ¡n trÆ°á»›c máº·t hÃ ng tÃ¡ sinh viÃªn. Sau Ä‘Ã³ tÃ´i Ä‘Ã£ Ä‘iá»u chá»‰nh chÃºng Ä‘á»ƒ phÃ¹ há»£p vá»›i quyá»ƒn sÃ¡ch <em>Agile Software Development, Principles, Patterns, and Practices</em> vÃ  bÃ i viáº¿t <em>Craftsman</em> Ä‘áº§u tiÃªn Ä‘Ã£ Ä‘Æ°á»£c xuáº¥t báº£n trÃªn táº¡p chÃ­ <em>Software Development</em>.</p>

<p>Äiá»u tÃ´i cáº£m tháº¥y thÃº vá»‹ trong module nÃ y lÃ , Ä‘Ã£ cÃ³ lÃºc nhiá»u ngÆ°á»i trong chÃºng tÃ´i xem nÃ³ lÃ  má»™t <em>tÃ i liá»‡u tham kháº£o hay</em>. CÃ²n bÃ¢y giá» chÃºng ta xem nÃ³ lÃ  má»™t má»› lá»™n xá»™n. HÃ£y xem cÃ³ bao nhiÃªu váº¥n Ä‘á» vá» comment mÃ  báº¡n cÃ³ thá»ƒ tÃ¬m tháº¥y.</p>

<p>| Listing 4-7 <strong>GeneratePrimes.java</strong> |
| â€” |</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * This class Generates prime numbers up to a user specified
 * maximum. The algorithm used is the Sieve of Eratosthenes.
 * &lt;p&gt;
 * Eratosthenes of Cyrene, b. c. 276 BC, Cyrene, Libya --
 * d. c. 194, Alexandria. The first man to calculate the
 * circumference of the Earth. Also known for working on
 * calendars with leap years and ran the library at Alexandria.
 * &lt;p&gt;
 * The algorithm is quite simple. Given an array of integers
 * starting at 2. Cross out all multiples of 2. Find the next
 * uncrossed integer, and cross out all of its multiples.
 * Repeat untilyou have passed the square root of the maximum
 * value.
 *
 * @author Alphonse
 * @version 13 Feb 2002 atp
 */</span>
<span class="kn">import</span> <span class="nn">java.util.*</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">GeneratePrimes</span>
<span class="o">{</span>
    <span class="cm">/**
    * @param maxValue is the generation limit.
    */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">generatePrimes</span><span class="o">(</span><span class="kt">int</span> <span class="n">maxValue</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">maxValue</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="o">)</span> <span class="c1">// the only valid case</span>
        <span class="o">{</span>
            <span class="c1">// declarations</span>
            <span class="kt">int</span> <span class="n">s</span> <span class="o">=</span> <span class="n">maxValue</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="c1">// size of array</span>
            <span class="kt">boolean</span><span class="o">[]</span> <span class="n">f</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="n">s</span><span class="o">];</span>
            <span class="kt">int</span> <span class="n">i</span><span class="o">;</span>
            <span class="c1">// initialize array to true.</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="n">f</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="c1">// get rid of known non-primes</span>
            <span class="n">f</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="c1">// sieve</span>
            <span class="kt">int</span> <span class="n">j</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="nc">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">s</span><span class="o">)</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">f</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="c1">// if i is uncrossed, cross its multiples.</span>
                <span class="o">{</span>
                    <span class="k">for</span> <span class="o">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">i</span><span class="o">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">s</span><span class="o">;</span> <span class="n">j</span> <span class="o">+=</span> <span class="n">i</span><span class="o">)</span>
                    <span class="n">f</span><span class="o">[</span><span class="n">j</span><span class="o">]</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span> <span class="c1">// multiple is not prime</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="c1">// how many primes are there?</span>
            <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">f</span><span class="o">[</span><span class="n">i</span><span class="o">])</span>
                <span class="n">count</span><span class="o">++;</span> <span class="c1">// bump count.</span>
            <span class="o">}</span>
            <span class="kt">int</span><span class="o">[]</span> <span class="n">primes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">count</span><span class="o">];</span>
            <span class="c1">// move the primes into the result</span>
            <span class="k">for</span> <span class="o">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">s</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">f</span><span class="o">[</span><span class="n">i</span><span class="o">])</span> <span class="c1">// if prime</span>
                <span class="n">primes</span><span class="o">[</span><span class="n">j</span><span class="o">++]</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">return</span> <span class="n">primes</span><span class="o">;</span> <span class="c1">// return the primes</span>
        <span class="o">}</span>
        <span class="k">else</span> <span class="c1">// maxValue &lt; 2</span>
        <span class="k">return</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span> <span class="c1">// return null array if bad input.</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Trong Listing 4-8, báº¡n cÃ³ thá»ƒ tháº¥y má»™t phiÃªn báº£n Ä‘Æ°á»£c tÃ¡i cáº¥u trÃºc cá»§a module trÃªn. ChÃº Ã½ ráº±ng viá»‡c sá»­ dá»¥ng comment Ä‘Æ°á»£c háº¡n cháº¿ tá»‘i Ä‘a. Chá»‰ cÃ³ hai comment trong toÃ n bá»™ module vÃ  chÃºng Ä‘á»u há»£p lÃ½.</p>

<p>| Listing 4-8 <strong>GeneratePrimes.java</strong> |
| â€” |</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/**
 * This class Generates prime numbers up to a user specified
 * maximum. The algorithm used is the Sieve of Eratosthenes.
 * Given an array of integers starting at 2:
 * Find the first uncrossed integer, and cross out all its
 * multiples. Repeat until there are no more multiples
 * in the array.
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">PrimeGenerator</span>
<span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">boolean</span><span class="o">[]</span> <span class="n">crossedOut</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="n">result</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">int</span><span class="o">[]</span> <span class="nf">generatePrimes</span><span class="o">(</span><span class="kt">int</span> <span class="n">maxValue</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">maxValue</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="o">)</span>
            <span class="k">return</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
        <span class="k">else</span>
        <span class="o">{</span>
            <span class="n">uncrossIntegersUpTo</span><span class="o">(</span><span class="n">maxValue</span><span class="o">);</span>
            <span class="n">crossOutMultiples</span><span class="o">();</span>
            <span class="n">putUncrossedIntegersIntoResult</span><span class="o">();</span>
            <span class="k">return</span> <span class="n">result</span><span class="o">;</span>
        <span class="o">}</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">uncrossIntegersUpTo</span><span class="o">(</span><span class="kt">int</span> <span class="n">maxValue</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="n">crossedOut</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="n">maxValue</span> <span class="o">+</span> <span class="mi">1</span><span class="o">];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">crossedOut</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="n">crossedOut</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">crossOutMultiples</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="kt">int</span> <span class="n">limit</span> <span class="o">=</span> <span class="n">determineIterationLimit</span><span class="o">();</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">limit</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">notCrossed</span><span class="o">(</span><span class="n">i</span><span class="o">))</span>
                <span class="n">crossOutMultiplesOf</span><span class="o">(</span><span class="n">i</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">determineIterationLimit</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="c1">// Every multiple in the array has a prime factor that</span>
        <span class="c1">// is less than or equal to the root of the array size,</span>
        <span class="c1">// so we don't have to cross out multiples of numbers</span>
        <span class="c1">// larger than that root.</span>
        <span class="kt">double</span> <span class="n">iterationLimit</span> <span class="o">=</span> <span class="nc">Math</span><span class="o">.</span><span class="na">sqrt</span><span class="o">(</span><span class="n">crossedOut</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
        <span class="k">return</span> <span class="o">(</span><span class="kt">int</span><span class="o">)</span> <span class="n">iterationLimit</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">crossOutMultiplesOf</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">multiple</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="n">i</span><span class="o">;</span>
                <span class="n">multiple</span> <span class="o">&lt;</span> <span class="n">crossedOut</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
                <span class="n">multiple</span> <span class="o">+=</span> <span class="n">i</span><span class="o">)</span>
            <span class="n">crossedOut</span><span class="o">[</span><span class="n">multiple</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">boolean</span> <span class="nf">notCrossed</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">)</span>
    <span class="o">{</span>
        <span class="k">return</span> <span class="n">crossedOut</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">==</span> <span class="kc">false</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">putUncrossedIntegersIntoResult</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">numberOfUncrossedIntegers</span><span class="o">()];</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="o">,</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">crossedOut</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">notCrossed</span><span class="o">(</span><span class="n">i</span><span class="o">))</span>
                <span class="n">result</span><span class="o">[</span><span class="n">j</span><span class="o">++]</span> <span class="o">=</span> <span class="n">i</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="nf">numberOfUncrossedIntegers</span><span class="o">()</span>
    <span class="o">{</span>
        <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">2</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">crossedOut</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span>
            <span class="k">if</span> <span class="o">(</span><span class="n">notCrossed</span><span class="o">(</span><span class="n">i</span><span class="o">))</span>
                <span class="n">count</span><span class="o">++;</span>
        <span class="k">return</span> <span class="n">count</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Tháº­t dá»… Ä‘á»ƒ chá»‰ ra comment Ä‘áº§u tiÃªn lÃ  dÆ° thá»«a vÃ¬ nÃ³ Ä‘á»c ráº¥t giá»‘ng hÃ m generatePrimes. Tuy nhiÃªn, tÃ´i nghÄ© ráº±ng comment giÃºp ngÆ°á»i Ä‘á»c dá»… tiáº¿p cáº­n thuáº­t toÃ¡n, vÃ¬ váº­y tÃ´i cÃ³ xu hÆ°á»›ng Ä‘á»ƒ láº¡i nÃ³.</p>

<p>Comment thá»© hai cháº¯c cháº¯n lÃ  cáº§n thiáº¿t. NÃ³ giáº£i thÃ­ch lÃ½ do Ä‘áº±ng sau viá»‡c sá»­ dá»¥ng giÃ¡ trá»‹ cÄƒn báº­c hai lÃ m giá»›i háº¡n vÃ²ng láº·p. TÃ´i khÃ´ng thá»ƒ tÃ¬m tháº¥y tÃªn biáº¿n Ä‘Æ¡n giáº£n hay cÃ¡ch thá»©c khÃ¡c Ä‘á»ƒ lÃ m rÃµ Ä‘iá»ƒm nÃ y. Máº·t khÃ¡c, viá»‡c sá»­ dá»¥ng cÄƒn báº­c hai cÃ³ thá»ƒ Ä‘á»ƒ láº¡i vÃ i váº¥n Ä‘á». TÃ´i cÃ³ tiáº¿t kiá»‡m Ä‘Æ°á»£c nhiá»u thá»i gian khi dÃ¹ng giÃ¡ trá»‹ cÄƒn báº­c hai lÃ m giá»›i háº¡n cho vÃ²ng láº·p hay khÃ´ng? Thá»i gian tiáº¿t kiá»‡m Ä‘Æ°á»£c cÃ³ nhiá»u hÆ¡n thá»i gian tÃ­nh cÄƒn báº­c hai hay khÃ´ng?</p>

<p>Hmm, tháº­t Ä‘Ã¡ng Ä‘á»ƒ suy nghÄ©. Sá»­ dá»¥ng cÄƒn báº­c hai lÃ m giá»›i háº¡n vÃ²ng láº·p Ä‘em láº¡i thá»a mÃ£n cho mÃ¡u hacker trong tÃ´i, nhÆ°ng tÃ´i khÃ´ng nghÄ© ngÆ°á»i khÃ¡c cÅ©ng cÃ³ mÃ¡u Ä‘Ã³. Má»™t comment á»Ÿ vá»‹ trÃ­ Ä‘Ã³ sáº½ giÃºp ngÆ°á»i Ä‘á»c dá»… dÃ ng hiá»ƒu nÃ³ hÆ¡n.</p>

<h3 id="tham-kháº£o">Tham kháº£o</h3>

<p><strong>[KP78]:</strong> Kernighan and Plaugher, <em>The Elements of Programming Style</em>, 2d. ed., McGrawHill, 1978.</p>

  </div><a class="u-url" href="/clean-code/chaper-04" hidden></a>

  <footer class="post-footer">
    <nav class="post-navigation">
      
        <a href="/clean-code/chaper-03" class="prev-post">â† ChÆ°Æ¡ng 3 - HÃ m</a>
      
      
        <a href="/clean-code/chaper-05" class="next-post">ChÆ°Æ¡ng 5 - Äá»‹nh dáº¡ng code â†’</a>
      
    </nav>
  </footer>
  
</article>

      </div>
    </main>

    <!--<footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="social-links"><ul class="social-media-list"><li><a href="https://github.com/hondanho" title="hondanho"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li></ul>
</div>
    </div>

  </div>

</footer>
-->

    <a href="#" id="back-to-top">
      Back To Top &uarr;
    </a>
  </body>

</html>
